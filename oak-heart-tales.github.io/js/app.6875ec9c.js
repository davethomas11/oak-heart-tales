(function(){"use strict";var e={583:function(e,t,n){var r={};n.r(r),n.d(r,{acos:function(){return bt},acosh:function(){return Et},asin:function(){return wt},asinh:function(){return zt},atan:function(){return kt},atan2:function(){return xt},atanh:function(){return Tt},ceil:function(){return It},copysign:function(){return Ct},cos:function(){return yt},cosh:function(){return At},degrees:function(){return Pt},e:function(){return ut},exp:function(){return st},expm1:function(){return lt},floor:function(){return Nt},hypot:function(){return Ot},inf:function(){return Yt},isclose:function(){return qt},isnan:function(){return Lt},log:function(){return ft},log10:function(){return dt},log1p:function(){return ct},log2:function(){return pt},modf:function(){return Rt},nan:function(){return Ut},pi:function(){return _t},pow:function(){return ht},radians:function(){return Mt},sin:function(){return gt},sinh:function(){return jt},sqrt:function(){return mt},tan:function(){return vt},tanh:function(){return St},trunc:function(){return Gt}});var o={};n.r(o),n.d(o,{_array:function(){return Dt},_bitmask1:function(){return Bt},_bitmask2:function(){return Xt},_bitmask3:function(){return Wt},_fill_array:function(){return Kt},_index:function(){return Ft},_random_integer:function(){return Qt},choice:function(){return Jt},randint:function(){return $t},random:function(){return Zt},seed:function(){return Vt},shuffle:function(){return en}});var a={};n.r(a),n.d(a,{__adapt__:function(){return pn},__d:function(){return yn},__date:function(){return dn},__debugGetLanguage:function(){return cn},__jan_jun_tz:function(){return zn},__lu:function(){return On},__months:function(){return kn},__months_long:function(){return xn},__now:function(){return hn},__tzn:function(){return In},__weekdays:function(){return mn},__weekdays_long:function(){return gn},_day_of_year:function(){return An},_daylight:function(){return En},_daylight_in_effect:function(){return Tn},_is_leap:function(){return Sn},_local_time_tuple:function(){return Mn},_lsplit:function(){return Pn},_timezone:function(){return Nn},_tzname:function(){return Gn},_utc_time_tuple:function(){return jn},altzone:function(){return Cn},asctime:function(){return Dn},ctime:function(){return Bn},daylight:function(){return Yn},gmtime:function(){return Wn},localtime:function(){return Xn},mktime:function(){return Fn},monotonic:function(){return Hn},strftime:function(){return Qn},strptime:function(){return Kn},time:function(){return Rn},timezone:function(){return Ln},tzname:function(){return Un}});var i=n(4168),_=n(2003),u=n(9874);const s={id:"app"},l={key:0},f={key:1},c={key:2},p={key:3};function d(e,t,n,r,o,a){const d=(0,_.g2)("ActionButtons");return(0,_.uX)(),(0,_.CE)("div",s,["menu"===o.screen?((0,_.uX)(),(0,_.CE)("div",l,[(0,_.Lk)("pre",null,(0,u.v_)(o.banner),1),(0,_.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.startNewGame&&a.startNewGame(...e))},"New Game"),(0,_.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.loadGame&&a.loadGame(...e))},"Load Game"),(0,_.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>a.quitGame&&a.quitGame(...e))},"Quit")])):"mapSize"===o.screen?((0,_.uX)(),(0,_.CE)("div",f,[t[12]||(t[12]=(0,_.Lk)("h2",null,"Select Map Size:",-1)),(0,_.Lk)("button",{onClick:t[3]||(t[3]=e=>a.selectMapSize(5))},"Small"),(0,_.Lk)("button",{onClick:t[4]||(t[4]=e=>a.selectMapSize(7))},"Medium"),(0,_.Lk)("button",{onClick:t[5]||(t[5]=e=>a.selectMapSize(9))},"Large")])):"game"===o.screen?((0,_.uX)(),(0,_.CE)("div",c,[(0,_.Lk)("pre",null,(0,u.v_)(o.gameText),1),(0,_.bo)((0,_.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.userInput=e),onKeyup:t[7]||(t[7]=(0,i.jR)((...e)=>a.handleInput&&a.handleInput(...e),["enter"])),placeholder:"Type command..."},null,544),[[i.Jo,o.userInput]]),(0,_.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>a.handleInput&&a.handleInput(...e))},"Send"),a.actions.length?((0,_.uX)(),(0,_.Wv)(d,{key:0,actions:a.actions,onAction:a.handleAction},null,8,["actions","onAction"])):(0,_.Q3)("",!0)])):"gameOver"===o.screen?((0,_.uX)(),(0,_.CE)("div",p,[t[13]||(t[13]=(0,_.Lk)("pre",null,"Game Over.",-1)),(0,_.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>a.loadGame&&a.loadGame(...e))},"Load"),(0,_.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>a.restartGame&&a.restartGame(...e))},"Restart"),(0,_.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>a.quitGame&&a.quitGame(...e))},"Quit")])):(0,_.Q3)("",!0)])}n(4189),n(3384);const h={class:"actions"},m=["disabled","title","onClick"];function g(e,t,n,r,o,a){return(0,_.uX)(),(0,_.CE)("div",h,[((0,_.uX)(!0),(0,_.CE)(_.FK,null,(0,_.pI)(a.filteredActions,t=>((0,_.uX)(),(0,_.CE)("button",{key:t.id,disabled:!t.enabled,title:t.reason||"",style:{margin:"0.25rem"},onClick:n=>e.$emit("action",t)},(0,u.v_)(t.label),9,m))),128))])}n(7932),n(6204);var y={name:"ActionButtons",props:{actions:{type:Array,required:!0}},computed:{filteredActions(){return this.actions.filter(e=>"save"!==e.id&&"load"!==e.id)}}},v=n(278);const w=(0,v.A)(y,[["render",g],["__scopeId","data-v-3692dd4e"]]);var b=w;n(2093),n(6466),n(6972),n(4133),n(1469),n(9452),n(8267),n(4965),n(9024),n(5381),n(774),n(8109),n(6705),n(4318),n(4248),n(1906),n(3214),n(9800);function k(e,t){let n;if(null===t||"object"!==typeof t)return t;if(t instanceof Date)return n=new Date,n.setTime(t.getTime()),n;if(t instanceof Array){n=[];for(let r=0,o=t.length;r<o;r++)n[r]=e?k(e,t[r]):t[r];return n}if(t instanceof Object){n={};for(let r in t)t.hasOwnProperty(r)&&(n[r]=e?k(e,t[r]):t[r]);return n}throw new Error("Copy not implemented for type ".concat(Object.prototype.toString.call(t)))}function x(e){return k(!1,e)}var O="org.transcrypt.__runtime__",P={};function M(e,t,n){var r=e;if(""!=t){for(var o=t.split("."),a=o.length,i=0;i<o.length;i++){if(!r.hasOwnProperty(o[i])){a=i;break}r=r[o[i]]}for(i=a;i<o.length;i++)r[o[i]]={},r=r[o[i]]}for(let _ of Object.getOwnPropertyNames(n))Object.defineProperty(r,_,{get(){return n[_]},enumerable:!0,configurable:!0})}function j(e,t,n){return e&&(e.hasOwnProperty("__class__")||"string"==typeof e||e instanceof String)?(n&&Object.defineProperty(e,n,{value:function(){var n=[].slice.apply(arguments);return t.apply(null,[e].concat(n))},writable:!0,enumerable:!0,configurable:!0}),function(){var n=[].slice.apply(arguments);return t.apply(null,[e.__proxy__?e.__proxy__:e].concat(n))}):t}function A(e,t,n){return e.hasOwnProperty("__class__")?function(){var n=[].slice.apply(arguments);return t.apply(null,[e.__class__].concat(n))}:function(){var n=[].slice.apply(arguments);return t.apply(null,[e].concat(n))}}P.interpreter_name="python",P.transpiler_name="transcrypt",P.executor_name=P.transpiler_name,P.transpiler_version="3.9.4";var S={__name__:"type",__bases__:[],__new__:function(e,t,n,r){for(var o=function(){var e=[].slice.apply(arguments);return o.__new__(e)},a=n.length-1;a>=0;a--){var i=n[a];for(var _ in i){var u=Object.getOwnPropertyDescriptor(i,_);null!=u&&Object.defineProperty(o,_,u)}for(let e of Object.getOwnPropertySymbols(i)){let t=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(o,e,t)}}for(var _ in o.__metaclass__=e,o.__name__=t.startsWith("py_")?t.slice(3):t,o.__bases__=n,r){u=Object.getOwnPropertyDescriptor(r,_);Object.defineProperty(o,_,u)}for(let s of Object.getOwnPropertySymbols(r)){let e=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(o,s,e)}return o}};S.__metaclass__=S;var z={__init__:function(e){},__metaclass__:S,__name__:"object",__bases__:[],__new__:function(e){var t=Object.create(this,{__class__:{value:this,enumerable:!0}});return("__getattr__"in this||"__setattr__"in this)&&(t.__proxy__=new Proxy(t,{get:function(e,t){let n=e[t];return void 0==n?e.__getattr__(t):n},set:function(e,t,n){try{e.__setattr__(t,n)}catch(r){e[t]=n}return!0}}),t=t.__proxy__),this.__init__.apply(null,[t].concat(e)),t}};function E(e,t,n,r){return void 0===r&&(r=t[0].__metaclass__),r.__new__(r,e,t,n)}function T(){var e=[].slice.apply(arguments);return"object"==typeof e[0]&&"__call__"in e[0]?e[0].__call__.apply(e[1],e.slice(2)):e[0].apply(e[1],e.slice(2))}P.executor_name=P.transpiler_name;function N(e){return e.__kwargtrans__=null,e.constructor=Object,e}function I(e,t){return t||(t=function(){}),{get:function(){return e(this)},set:function(e){t(this,e)},enumerable:!0}}function G(e,t,n){e.hasOwnProperty(t)||Object.defineProperty(e,t,n)}function C(e,t){return t in e?e[t]:e["py_"+t]}function q(e,t){try{return t in e||"py_"+t in e}catch(n){return!1}}function L(e,t){return void 0!==t&&null!==t&&(t.__contains__ instanceof Function?t.__contains__(e):t.indexOf?t.indexOf(e)>-1:t.hasOwnProperty(e))}function Y(e){return e.startswith("__")&&e.endswith("__")||"constructor"==e||e.startswith("py_")}function U(e){if(void 0===e||null===e)return 0;if(e.__len__ instanceof Function)return e.__len__();if(void 0!==e.length)return e.length;var t=0;for(var n in e)Y(n)||t++;return t}function R(e){return void 0!==e&&null!==e&&(["boolean","number"].indexOf(typeof e)>=0?e:e.__bool__ instanceof Function?!!e.__bool__()&&e:e.__len__ instanceof Function?0!==e.__len__()&&e:(e instanceof Function||0!==U(e))&&e)}function H(e){if("inf"==e)return 1/0;if("-inf"==e)return-1/0;if("nan"==e)return NaN;if(isNaN(parseFloat(e))){if(!1===e)return 0;if(!0===e)return 1;throw We("could not convert string to float: '"+fe(e)+"'",new Error)}return+e}function D(e){return 0|H(e)}function F(e){return!!R(e)}function B(e){var t=typeof e;if("object"!=t)return"boolean"==t?F:"string"==t?fe:"number"==t?e%1==0?D:H:null;try{return"__class__"in e?e.__class__:z}catch(n){return t}}function X(e,t){if(t instanceof Array){for(let n of t)if(X(e,n))return!0;return!1}try{var n=e;if(n==t)return!0;var r=[].slice.call(n.__bases__);while(r.length){if(n=r.shift(),n==t)return!0;n.__bases__.length&&(r=[].slice.call(n.__bases__).concat(r))}return!1}catch(o){return e==t||t==z}}function W(e,t){try{return X("__class__"in e?e.__class__:B(e),t)}catch(n){return X(B(e),t)}}function K(e){try{return e.__repr__()}catch(a){try{return e.__str__()}catch(a){try{if(null==e)return"None";if(e.constructor==Object){var t="{",n=!1;for(var r in e)if(!Y(r)){if(r.isnumeric())var o=r;else o="'"+r+"'";n?t+=", ":n=!0,t+=o+": "+K(e[r])}return t+="}",t}return"boolean"==typeof e?e.toString().capitalize():e.toString()}catch(a){return"<object of type: "+typeof e+">"}}}}function Q(e,...t){let n;function r(e){return e}if(t.length>0&&t[t.length-1]&&t[t.length-1].hasOwnProperty("__kwargtrans__")){const e=t[t.length-1];if(t=t.slice(0,-1),e.hasOwnProperty("py_default")&&(n=e["py_default"]),e.hasOwnProperty("key")&&(r=e["key"]),"[object Function]"!==Object.prototype.toString.call(r))throw TypeError("object is not callable",new Error)}if(0===t.length)throw TypeError("expected at least 1 argument, got 0",new Error);if(t.length>1&&void 0!==n)throw TypeError("Cannot specify a default with multiple positional arguments",new Error);if(1===t.length){if("[object Array]"!==Object.prototype.toString.call(t[0]))throw TypeError("object is not iterable",new Error);t=t[0]}if(0===t.length){if(void 0===n)throw We("arg is an empty sequence",new Error);return n}return t.reduce((t,n)=>e(r(n),r(t))?n:t)}function V(...e){return Q(function(e,t){return e>t},...e)}function $(...e){return Q(function(e,t){return e<t},...e)}H.__name__="float",H.__bases__=[z],D.__name__="int",D.__bases__=[z],F.__name__="bool",F.__bases__=[D];var J=Math.abs;function Z(e,t){if(t){var n=Math.pow(10,t);e*=n}var r=Math.round(e);return r-e==.5&&r%2&&(r-=1),t&&(r/=n),r}function ee(){try{var e=this.__next__();return{value:e,done:!1}}catch(t){return{value:void 0,done:!0}}}function te(){var e=this.next();if(e.done)throw Xe(new Error);return e.value}function ne(e){if("string"==typeof e||"__iter__"in e){var t=e.__iter__();t.next=ee}else if("selector"in e){t=ue(e).__iter__();t.next=ee}else if("next"in e){t=e;"__next__"in t||(t.__next__=te)}else{if(!(Symbol.iterator in e))throw Be(new Error);t=e[Symbol.iterator]();t.__next__=te}return t[Symbol.iterator]=function(){return t},t}function re(e){this.iterable=e,this.index=0,this.__len__=function(){return e.length}}function oe(e){this.iterable=e,this.index=0}function ae(){for(var e=[].slice.call(arguments),t=0;t<e.length;t++)"string"==typeof e[t]?e[t]=e[t].split(""):Array.isArray(e[t])||(e[t]=Array.from(e[t]));var n=0==e.length?[]:e.reduce(function(e,t){return e.length<t.length?e:t});return n.map(function(t,n){return e.map(function(e){return e[n]})})}function*ie(e,t=0){t.hasOwnProperty("__kwargtrans__")&&(t=t["start"]);let n=t;for(const r of e)yield[n,r],n+=1}re.prototype.__next__=function(){if(this.index<this.iterable.length)return this.iterable[this.index++];throw Xe(new Error)},oe.prototype.next=function(){return this.index<this.iterable.py_keys.length?{value:this.index++,done:!1}:{value:void 0,done:!0}};var _e=ie;function ue(e){let t=e?Array.from(e):[];return t}function se(e){let t=e?[].slice.apply(e):[];return t.__class__=se,t}function le(e){let t=[];if(e)for(let n=0;n<e.length;n++)t.add(e[n]);return t.__class__=le,t}Array.prototype.__class__=ue,ue.__name__="list",ue.__bases__=[z],Array.prototype.__iter__=function(){return new re(this)},Array.prototype.__getslice__=function(e,t,n){if(null===n&&(n=1),null===e&&(e=n<0?-1:0),e<0?e=Math.max(this.length+e,0):(e>this.length||e===this.length&&n<0)&&(e=this.length>0?this.length-1:0),null===t?t=n<0&&this.length>0?-1:this.length:t<0?t=Math.max(this.length+t,n<0&&this.length>0?-1:0):t>this.length&&(t=this.length),1===n)return Array.prototype.slice.call(this,e,t);let r=ue([]);if(n>0)for(let o=e;o<t;o+=n)r.push(this[o]);else{if(!(n<0))throw We("slice step cannot be zero",new Error);for(let o=e;o>t;o+=n)r.push(this[o])}return r},Array.prototype.__setslice__=function(e,t,n,r){if(null===n&&(n=1),null===e&&(e=n<0?-1:0),e<0?e=Math.max(this.length+e,0):(e>this.length||e===this.length&&n<0)&&(e=this.length>0?this.length-1:0),null===t?t=n<0&&this.length>0?-1:this.length:t<0?t=Math.max(this.length+t,n<0&&this.length>0?-1:0):t>this.length&&(t=this.length),1===n)Array.prototype.splice.apply(this,[e,t-e].concat(Array.from(r)));else{const o=Math.ceil((t-e)/n);if((r.length>0||o>0)&&o!==r.length)throw We("attempt to assign sequence of size "+r.length+" to extended slice of size "+o,new Error);let a=0;if(n>0)for(let i=e;i<t;i+=n)this[i]=r[a++];else{if(!(n<0))throw We("slice step cannot be zero",new Error);for(let o=e;o>t;o+=n)this[o]=r[a++]}}},Array.prototype.__repr__=function(){if(this.__class__==le&&!this.length)return"set()";let e=this.__class__&&this.__class__!=ue?this.__class__==se?"(":"{":"[";for(let t=0;t<this.length;t++)t&&(e+=", "),e+=K(this[t]);return this.__class__==se&&1==this.length&&(e+=","),e+=this.__class__&&this.__class__!=ue?this.__class__==se?")":"}":"]",e},Array.prototype.__str__=Array.prototype.__repr__,Array.prototype.append=function(e){this.push(e)},Array.prototype.py_clear=function(){this.length=0},Array.prototype.py_copy=function(){return this.slice()},Array.prototype.extend=function(e){this.push.apply(this,e)},Array.prototype.insert=function(e,t){this.splice(e,0,t)},Array.prototype.remove=function(e){let t=this.indexOf(e);if(-1===t)throw We("list.remove(x): x not in list",new Error);this.splice(t,1)},Array.prototype.index=function(e){return this.indexOf(e)},Array.prototype.py_pop=function(e){if(0===this.length)throw Ve("pop from empty list",new Error);if(void 0===e)return this.pop();{const t=e<0?this.length+e:e;if(void 0===this[t])throw Ve("pop index out of range",new Error);return this.splice(t,1)[0]}},Array.prototype.py_sort=function(){nt.apply(null,[this].concat([].slice.apply(arguments)))},Array.prototype.__add__=function(e){return ue(this.concat(e))},Array.prototype.__mul__=function(e){let t=this;for(let n=1;n<e;n++)t=t.concat(this);return t},Array.prototype.__rmul__=Array.prototype.__mul__,se.__name__="tuple",se.__bases__=[z],le.__name__="set",le.__bases__=[z],Array.prototype.__bindexOf__=function(e){e+="";let t=0,n=this.length-1;while(t<=n){let r=(t+n)/2|0,o=this[r]+"";if(o<e)t=r+1;else{if(!(o>e))return r;n=r-1}}return-1},Array.prototype.add=function(e){-1==this.indexOf(e)&&this.push(e)},Array.prototype.discard=function(e){var t=this.indexOf(e);-1!=t&&this.splice(t,1)},Array.prototype.isdisjoint=function(e){this.sort();for(let t=0;t<e.length;t++)if(-1!=this.__bindexOf__(e[t]))return!1;return!0},Array.prototype.issuperset=function(e){this.sort();for(let t=0;t<e.length;t++)if(-1==this.__bindexOf__(e[t]))return!1;return!0},Array.prototype.issubset=function(e){return le(e.slice()).issuperset(this)},Array.prototype.union=function(e){let t=le(this.slice().sort());for(let n=0;n<e.length;n++)-1==t.__bindexOf__(e[n])&&t.push(e[n]);return t},Array.prototype.intersection=function(e){this.sort();let t=le();for(let n=0;n<e.length;n++)-1!=this.__bindexOf__(e[n])&&t.push(e[n]);return t},Array.prototype.difference=function(e){let t=le(e.slice().sort()),n=le();for(let r=0;r<this.length;r++)-1==t.__bindexOf__(this[r])&&n.push(this[r]);return n},Array.prototype.symmetric_difference=function(e){return this.union(e).difference(this.intersection(e))},Array.prototype.py_update=function(){let e=[].concat.apply(this.slice(),arguments).sort();this.py_clear();for(let t=0;t<e.length;t++)e[t]!=e[t-1]&&this.push(e[t])},Array.prototype.__eq__=function(e){if(this.length!=e.length)return!1;this.__class__==le&&(this.sort(),e.sort());for(let t=0;t<this.length;t++)if(this[t]!=e[t])return!1;return!0},Array.prototype.__ne__=function(e){return!this.__eq__(e)},Array.prototype.__le__=function(e){if(this.__class__==le)return this.issubset(e);for(let t=0;t<this.length;t++){if(this[t]>e[t])return!1;if(this[t]<e[t])return!0}return!0},Array.prototype.__ge__=function(e){if(this.__class__==le)return this.issuperset(e);for(let t=0;t<this.length;t++){if(this[t]<e[t])return!1;if(this[t]>e[t])return!0}return!0},Array.prototype.__lt__=function(e){return this.__class__==le?this.issubset(e)&&!this.issuperset(e):!this.__ge__(e)},Array.prototype.__gt__=function(e){return this.__class__==le?this.issuperset(e)&&!this.issubset(e):!this.__le__(e)};function fe(e){if("number"===typeof e)return e.toString();try{return e.__str__()}catch(t){try{return K(e)}catch(t){return String(e)}}}function ce(e){return this.hasOwnProperty(e)}function pe(){var e=[];for(var t in this)Y(t)||e.push(t);return e}function de(){var e=[];for(var t in this)Y(t)||e.push([t,this[t]]);return e}function he(e){delete this[e]}function me(){for(var e in this)delete this[e]}function ge(e,t){var n=this[e];return void 0===n&&(n=this["py_"+e]),void 0===n?void 0===t?null:t:n}function ye(e,t){var n=this[e];if(void 0!==n)return n;var r=void 0===t?null:t;return this[e]=r,r}function ve(e,t){var n=this[e];if(void 0!==n)return delete this[e],n;if(void 0===t)throw Ke(e,new Error);return t}function we(){const e=Object.keys(this);if(0===e.length)throw Ke("popitem(): dictionary is empty",new Error);const t=e[e.length-1],n=se([t,this[t]]);return delete this[t],n}function be(e){for(var t in e)this[t]=e[t]}function ke(){let e={};for(let t in this)e[t]=this[t];return je(e)}function xe(e,t){if(void 0===e)throw TypeError("fromkeys expected at least 1 argument, got 0");if(!["[object Array]","[object String]"].includes(Object.prototype.toString.call(e)))throw TypeError("object is not iterable",new Error);void 0===t&&(t=null);let n={};for(let r=0;r<e.length;r++)n[e[r]]=t;return je(n)}function Oe(){var e=[];for(var t in this)Y(t)||e.push(this[t]);return e}function Pe(e){return this[e]}function Me(e,t){this[e]=t}function je(e){let t={};if(!e||e instanceof Array){if(e)for(let n=0;n<e.length;n++){const r=e[n];if(!(r instanceof Array)||2!==r.length)throw We("dict update sequence element #"+n+" has length "+r.length+"; 2 is required",new Error);const o=r[0];let a=r[1];!(e instanceof Array)&&e instanceof Object&&(W(e,je)||(a=je(a))),t[o]=a}}else if(W(e,je)){const n=e.py_keys();for(let r=0;r<n.length;r++){const o=n[r];t[o]=e[o]}}else{if(!(e instanceof Object))throw We("Invalid type of object for dict creation",new Error);t=e}return G(t,"__class__",{value:je,enumerable:!1,writable:!0}),G(t,"__contains__",{value:ce,enumerable:!1}),G(t,"py_keys",{value:pe,enumerable:!1}),G(t,"__iter__",{value:function(){new re(this.py_keys())},enumerable:!1}),G(t,Symbol.iterator,{value:function(){new oe(this.py_keys())},enumerable:!1}),G(t,"py_items",{value:de,enumerable:!1}),G(t,"py_del",{value:he,enumerable:!1}),G(t,"py_clear",{value:me,enumerable:!1}),G(t,"py_get",{value:ge,enumerable:!1}),G(t,"py_setdefault",{value:ye,enumerable:!1}),G(t,"py_pop",{value:ve,enumerable:!1}),G(t,"py_popitem",{value:we,enumerable:!1}),G(t,"py_update",{value:be,enumerable:!1}),G(t,"py_copy",{value:ke,enumerable:!1}),G(t,"py_values",{value:Oe,enumerable:!1}),G(t,"py_fromkeys",{value:xe,enumerable:!1}),G(t,"__getitem__",{value:Pe,enumerable:!1}),G(t,"__setitem__",{value:Me,enumerable:!1}),t}function Ae(e){return this.__doc__=e,this}function Se(e,t){return"object"==typeof e&&"__mod__"in e?e.__mod__(t):"object"==typeof t&&"__rmod__"in t?t.__rmod__(e):(e%t+t)%t}Uint8Array.prototype.__add__=function(e){let t=new Uint8Array(this.length+e.length);return t.set(this),t.set(e,this.length),t},Uint8Array.prototype.__mul__=function(e){let t=new Uint8Array(e*this.length);for(let n=0;n<e;n++)t.set(this,n*this.length);return t},Uint8Array.prototype.__rmul__=Uint8Array.prototype.__mul__,String.prototype.__class__=fe,fe.__name__="str",fe.__bases__=[z],String.prototype.__iter__=function(){new re(this)},String.prototype.__repr__=function(){return(-1==this.indexOf("'")?"'"+this+"'":'"'+this+'"').py_replace("\t","\\t").py_replace("\n","\\n")},String.prototype.__str__=function(){return this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.endswith=function(e,t=0,n){void 0===n&&(n=this.length);const r=this.slice(t,n);if(!(e instanceof Array))return""===e||r.slice(-e.length)===e;for(var o=0;o<e.length;o++)if(r.slice(-e[o].length)===e[o])return!0;return!1},String.prototype.find=function(e,t){return this.indexOf(e,t)},String.prototype.__getslice__=function(e,t,n){if(null===n&&(n=1),null===e&&(e=n<0?-1:0),e<0?e=Math.max(this.length+e,0):e>this.length&&(e=this.length>0?this.length+(n<0?-1:0):0),null===t?t=n<0&&this.length>0?-1:this.length:t<0?t=Math.max(this.length+t,n<0&&this.length>0?-1:0):t>this.length&&(t=this.length),1===n)return this.substring(e,e>t?e:t);let r="";if(n>0)for(var o=e;o<t;o+=n)r=r.concat(this.charAt(o));else{if(!(n<0))throw We("slice step cannot be zero",new Error);for(o=e;o>t;o+=n)r=r.concat(this.charAt(o))}return r},G(String.prototype,"format",{get:function(){return j(this,function(e){var t=se([].slice.apply(arguments).slice(1)),n=0;return e.replace(/\{(\w*)\}/g,function(e,r){if(""==r&&(r=n++),r==+r)return void 0===t[r]?e:fe(t[r]);for(var o=0;o<t.length;o++)if("object"==typeof t[o]&&void 0!==t[o][r])return fe(t[o][r]);return e})})},enumerable:!0}),String.prototype.isalnum=function(){return/^[0-9a-zA-Z]{1,}$/.test(this)},String.prototype.isalpha=function(){return/^[a-zA-Z]{1,}$/.test(this)},String.prototype.isdecimal=function(){return/^[0-9]{1,}$/.test(this)},String.prototype.isdigit=function(){return this.isdecimal()},String.prototype.islower=function(){return/^[a-z]{1,}$/.test(this)},String.prototype.isupper=function(){return/^[A-Z]{1,}$/.test(this)},String.prototype.isspace=function(){return/^[\s]{1,}$/.test(this)},String.prototype.isnumeric=function(){return!isNaN(parseFloat(this))&&isFinite(this)},String.prototype.join=function(e){return e=Array.from(e),e.join(this)},String.prototype.lower=function(){return this.toLowerCase()},String.prototype.py_replace=function(e,t,n){if(void 0===n||n<0)return this.split(e).join(t);if(0===n)return this;{const r=this.split(e,n).join(t),o=this.slice(this.split(e,n).join(e).length+1);return r.concat(o.length>0?t:"",o)}},String.prototype.lstrip=function(){return this.replace(/^\s*/g,"")},String.prototype.rfind=function(e,t){return this.lastIndexOf(e,t)},String.prototype.rsplit=function(e,t){if(void 0==e||null==e){e=/\s+/;var n=this.strip()}else n=this;if(void 0==t||-1==t)return n.split(e);var r=n.split(e);if(t<r.length){var o=r.length-t;return[r.slice(0,o).join(e)].concat(r.slice(o))}return r},String.prototype.rstrip=function(){return this.replace(/\s*$/g,"")},String.prototype.py_split=function(e,t){if(void 0==e||null==e){e=/\s+/;var n=this.strip()}else n=this;if(void 0==t||-1==t)return n.split(e);var r=n.split(e);return t<r.length?r.slice(0,t).concat([r.slice(t).join(e)]):r},String.prototype.splitlines=function(e){return 0===this.length?[]:void 0===e||null===e||!1===e?this.trimEnd().split(/\r?\n|\r|\n/g):this.split(/(?<=\n)(?=\n)|(?<=[\r\n])(?=[^\r\n])/g)},String.prototype.startswith=function(e,t=0,n){void 0===n&&(n=this.length);const r=this.slice(t,n);if(!(e instanceof Array))return 0===r.indexOf(e);for(let o=0;o<e.length;o++)if(0===r.indexOf(e[o]))return!0;return!1},String.prototype.strip=function(){return this.trim()},String.prototype.upper=function(){return this.toUpperCase()},String.prototype.__mul__=function(e){for(var t="",n=0;n<e;n++)t+=this;return t},String.prototype.__rmul__=String.prototype.__mul__,je.__name__="dict",je.__bases__=[z],je.py_fromkeys=xe,G(Function.prototype,"__setdoc__",{value:Ae,enumerable:!1});function ze(e){return"object"==typeof e&&"__neg__"in e?e.__neg__():-e}function Ee(e,t){return"object"==typeof e&&"__mul__"in e?e.__mul__(t):"object"==typeof t&&"__rmul__"in t?t.__rmul__(e):"string"==typeof e?e.__mul__(t):"string"==typeof t?t.__rmul__(e):e*t}function Te(e,t){return"object"==typeof e&&"__floordiv__"in e?e.__floordiv__(t):"object"==typeof t&&"__rfloordiv__"in t?t.__rfloordiv__(e):"object"==typeof e&&"__div__"in e?e.__div__(t):"object"==typeof t&&"__rdiv__"in t?t.__rdiv__(e):Math.floor(e/t)}function Ne(e,t){return"object"==typeof e&&"__add__"in e?e.__add__(t):"object"==typeof t&&"__radd__"in t?t.__radd__(e):e+t}function Ie(e,t){return"object"==typeof e&&"__sub__"in e?e.__sub__(t):"object"==typeof t&&"__rsub__"in t?t.__rsub__(e):e-t}function Ge(e,t){return"object"==typeof e&&"__eq__"in e?e.__eq__(t):e==t}function Ce(e,t){return"object"==typeof e&&"__lt__"in e?e.__lt__(t):e<t}function qe(e,t){return"object"==typeof e&&"__le__"in e?e.__le__(t):e<=t}function Le(e,t){return"object"==typeof e&&"__gt__"in e?e.__gt__(t):e>t}function Ye(e,t){return"object"==typeof e&&"__iadd__"in e?e.__iadd__(t):"object"==typeof e&&"__add__"in e?e.__add__(t):"object"==typeof t&&"__radd__"in t?t.__radd__(e):e+t}function Ue(e,t){return"object"==typeof e&&"__isub__"in e?e.__isub__(t):"object"==typeof e&&"__sub__"in e?e.__sub__(t):"object"==typeof t&&"__rsub__"in t?t.__rsub__(e):e-t}function Re(e,t){if("object"==typeof e&&"__getitem__"in e)return e.__getitem__(t);if(["[object Array]","[object String]"].includes(Object.prototype.toString.call(e))){const n=e[t<0?e.length+t:t];if(void 0===n)throw Ve("index out of range",new Error);return n}return e[t]}function He(e,t,n,r){return"object"==typeof e&&"__getitem__"in e?e.__getitem__([t,n,r]):e.__getslice__(t,n,r)}var De=E("BaseException",[z],{__module__:O}),Fe=E("Exception",[De],{__module__:O,get __init__(){return j(this,function(e){var t=je();if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var r=arguments[n--];for(var o in r)switch(o){case"self":e=r[o];break;default:t[o]=r[o]}delete t.__kwargtrans__}var a=se([].slice.apply(arguments).slice(1,n+1))}else a=se();e.__args__=a,null!=t.error?e.stack=t.error.stack:Error?e.stack=(new Error).stack:e.stack="No stack trace available"})},get __repr__(){return j(this,function(e){return U(e.__args__)>1?"{}{}".format(e.__class__.__name__,K(se(e.__args__))):U(e.__args__)?"{}({})".format(e.__class__.__name__,K(e.__args__[0])):"{}()".format(e.__class__.__name__)})},get __str__(){return j(this,function(e){return U(e.__args__)>1?fe(se(e.__args__)):U(e.__args__)?fe(e.__args__[0]):""})}}),Be=E("IterableError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t){Fe.__init__(e,"Can't iterate over non-iterable",N({error:t}))})}}),Xe=E("StopIteration",[Fe],{__module__:O,get __init__(){return j(this,function(e,t){Fe.__init__(e,"Iterator exhausted",N({error:t}))})}}),We=E("ValueError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){Fe.__init__(e,t,N({error:n}))})}}),Ke=E("KeyError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){Fe.__init__(e,t,N({error:n}))})}}),Qe=(E("AssertionError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){t?Fe.__init__(e,t,N({error:n})):Fe.__init__(e,N({error:n}))})}}),E("NotImplementedError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){Fe.__init__(e,t,N({error:n}))})}})),Ve=E("IndexError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){Fe.__init__(e,t,N({error:n}))})}}),$e=E("AttributeError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){Fe.__init__(e,t,N({error:n}))})}}),Je=E("py_TypeError",[Fe],{__module__:O,get __init__(){return j(this,function(e,t,n){Fe.__init__(e,t,N({error:n}))})}}),Ze=E("Warning",[Fe],{__module__:O}),et=(E("UserWarning",[Ze],{__module__:O}),E("DeprecationWarning",[Ze],{__module__:O}),E("RuntimeWarning",[Ze],{__module__:O}),function(e,t,n){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"iterable":e=o[a];break;case"key":t=o[a];break;case"reverse":n=o[a];break}}}t?e.sort(function(e,n){if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"a":e=o[a];break;case"b":n=o[a];break}}}return t(e)<t(n)?-1:1}):e.sort(function(e,t){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var r=arguments[n--];for(var o in r)switch(o){case"a":e=r[o];break;case"b":t=r[o];break}}}return e<t?-1:1}),n&&e.reverse()}),tt=function(e){var t=null,n=!1;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"iterable":e=o[a];break;case"key":t=o[a];break;case"reverse":n=o[a];break}}}if(B(e)==je)var i=x(e.py_keys());else i=x(e);return et(i,t,n),i},nt=function(e){var t=null,n=!1;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"iterable":e=o[a];break;case"key":t=o[a];break;case"reverse":n=o[a];break}}}et(e,t,n)},rt=function(e){var t=se([].slice.apply(arguments).slice(1));return function(){var n=[];for(var r of ae(...t))n.append(e(...r));return n}()},ot=function(e,t){return se([Math.floor(e/t),Se(e,t)])},at=E("__Terminal__",[z],{__module__:O,get __init__(){return j(this,function(e){e.buffer="";try{e.element=document.getElementById("__terminal__")}catch(t){e.element=null}e.element&&(e.element.style.overflowX="auto",e.element.style.boxSizing="border-box",e.element.style.padding="5px",e.element.innerHTML="_")})},get print(){return j(this,function(e){var t=" ",n="\n";if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"self":e=o[a];break;case"sep":t=o[a];break;case"end":n=o[a];break}}var i=se([].slice.apply(arguments).slice(1,r+1))}else i=se();e.buffer="{}{}{}".format(e.buffer,t.join(function(){var e=[];for(var t of i)e.append(fe(t));return e}()),n).__getslice__(-4096,null,1),e.element?(e.element.innerHTML=e.buffer.py_replace("\n","<br>").py_replace(" ","&nbsp"),e.element.scrollTop=e.element.scrollHeight):console.log(t.join(function(){var e=[];for(var t of i)e.append(fe(t));return e}()))})},get input(){return j(this,function(e,t){if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var r=arguments[n--];for(var o in r)switch(o){case"self":e=r[o];break;case"question":t=r[o];break}}}e.print("{}".format(t),N({end:""}));var a=window.prompt("\n".join(e.buffer.py_split("\n").__getslice__(-8,null,1)));return e.print(a),a})}}),it=at(),_t=(it.print,it.input,Math.PI),ut=Math.E,st=Math.exp,lt=function(e){return Math.exp(e)-1},ft=function(e,t){return void 0===t?Math.log(e):Math.log(e)/Math.log(t)},ct=function(e){return Math.log(e+1)},pt=function(e){return Math.log(e)/Math.LN2},dt=function(e){return Math.log(e)/Math.LN10},ht=Math.pow,mt=Math.sqrt,gt=Math.sin,yt=Math.cos,vt=Math.tan,wt=Math.asin,bt=Math.acos,kt=Math.atan,xt=Math.atan2,Ot=Math.hypot,Pt=function(e){return 180*e/Math.PI},Mt=function(e){return e*Math.PI/180},jt=Math.sinh,At=Math.cosh,St=Math.tanh,zt=Math.asinh,Et=Math.acosh,Tt=Math.atanh,Nt=Math.floor,It=Math.ceil,Gt=Math.trunc,Ct=function(e,t){return Math.sign(e)==Math.sign(t)?e:-e},qt=function(e,t,n,r){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=1e-9;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var a=arguments[o--];for(var i in a)switch(i){case"a":e=a[i];break;case"b":t=a[i];break;case"rel_tol":n=a[i];break;case"abs_tol":r=a[i];break}}}return Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r)},Lt=isNaN,Yt=1/0,Ut=NaN,Rt=function(e){var t=e>=0?1:-1,n=ot(J(e),1),r=n[0],o=n[1];return se([o*t,r*t])},Ht={};M(Ht,"",r);var Dt=function(){for(var e=[],t=0;t<624;t++)e.append(0);return e}(),Ft=0,Bt=Math.pow(2,32)-1,Xt=Math.pow(2,31),Wt=Math.pow(2,31)-1,Kt=function(){for(var e=0;e<624;e++){var t=(Dt[e]&Xt)+(Dt[Se(e+1,624)]&Wt);Dt[e]=Dt[Se(e+397,624)]^t>>1,0!=Se(t,2)&&(Dt[e]^=2567483615)}},Qt=function(){0==Ft&&Kt();var e=Dt[Ft];return e^=e>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>18,Ft=Se(Ft+1,624),e},Vt=function(e){if("undefined"==typeof e||null!=e&&e.hasOwnProperty("__kwargtrans__"))e=D(Wt*Math.random());Dt[0]=e;for(var t=1;t<624;t++)Dt[t]=(1812433253*Dt[t-1]^(Dt[t-1]>>30)+t)&Bt;Ft=0},$t=function(e,t){return e+Se(Qt(),t-e+1)},Jt=function(e){return e[$t(0,U(e)-1)]},Zt=function(){return Qt()/Wt},en=function(e){for(var t=U(e)-1;t>0;t--){var n=Ht.floor(Zt()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}};Vt();var tn={},nn={};M(nn,"",o),M(tn,"",r);var rn="world",on=E("Tile",[z],{__module__:rn,get __init__(){return j(this,function(e,t,n,r,o,a,i){if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=!1;if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if("undefined"==typeof i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=!1;e.py_name=t,e.description=n,e.danger=r,e.safe=o,e.ascii=a,e.shop=i})},get to_dict(){return j(this,function(e){return je({name:e.py_name,description:e.description,danger:e.danger,safe:e.safe,ascii:e.ascii,shop:e.shop})})},get from_dict(){return function(e){return on(N({py_name:e["name"],description:e["description"],danger:H(L("danger",e)?e["danger"]:0),safe:F(!!L("safe",e)&&e["safe"]),ascii:e["ascii"],shop:F(!!L("shop",e)&&e["shop"])}))}}}),an=E("World",[z],{__module__:rn,get __init__(){return j(this,function(e,t,n,r,o){if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;e.width=t,e.height=n,e.grid=r,e.seed=o})},get get_tile(){return j(this,function(e,t,n){return e.grid[n][t]})},get to_dict(){return j(this,function(e){return je({width:e.width,height:e.height,seed:e.seed,grid:function(){var t=[];for(var n of e.grid)t.append(function(){var e=[];for(var t of n)e.append(t.to_dict());return e}());return t}()})})},get get_size(){return j(this,function(e){return e.width})},get from_dict(){return function(e){var t=D(e["width"]),n=D(e["height"]),r=e.py_get("seed"),o=function(){var t=[];for(var n of e["grid"])t.append(function(){var e=[];for(var t of n)e.append(on.from_dict(t));return e}());return t}();return an(N({width:t,height:n,grid:o,seed:r}))}},get _default_tileset(){return function(){var e=je({village:je({name:"Oakheart Village",description:"Your humble village. A safe haven.",danger:0,safe:!0}),tiles:[je({name:"Western Farms",description:"Abandoned fields overrun with weeds.",danger:.2}),je({name:"Old Watchtower",description:"A crumbling tower watches the valleys.",danger:.3}),je({name:"Frost Creek",description:"Icy water murmurs over smooth stones.",danger:.35}),je({name:"Mire Flats",description:"Boggy ground that sucks at your boots.",danger:.45}),je({name:"Gloomwood",description:"Dark trees crowd the path. Eyes watch.",danger:.55}),je({name:"Ruined Keep",description:"Broken walls hide shadows and secrets.",danger:.6}),je({name:"Northern Ridge",description:"Wind-swept ridge with sparse pines.",danger:.35}),je({name:"Eastgate Road",description:"A cobbled road lined with old mileposts.",danger:.25})]});return e}},get _pseudoRandomSeed(){return j(this,function(e){var t=1e4*tn.sin(e),n=D(1e6*(t-tn.floor(t)));return je({choice:function(e){return e[Se(n,U(e))]},randrange:function(e,t){return e+Se(n,t-e)},shuffle:function(e){return e.py_sort(N({key:function(e){return n}}))}})})},get generate_random(){return function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if(null===t)t=an._default_tileset();if(null===n)n=nn.randrange(1,1e7);for(var r=an._pseudoRandomSeed(n),o=t["tiles"],a=t["village"],i=e,_=i,u=i,s=Math.floor(_/2),l=Math.floor(u/2),f=[],c=0;c<u;c++){for(var p=[],d=0;d<_;d++)if(d!=s||c!=l){var h=r.choice(o),m=J(d-s)+J(c-l),g=H(L("danger",h)?h["danger"]:.2),y=$(.8,V(0,g+.05*m));p.append(on(N({py_name:h["name"],description:h["description"],danger:y,safe:!1,ascii:h["ascii"]})))}else p.append(on.from_dict(a));f.append(p)}var v=an._pseudoRandomSeed(n),w=V(1,Math.floor(e/3)),b=0,k=function(){for(var e=[],t=0;t<u;t++)for(var n=0;n<_;n++)n==s&&t==l||e.append(se([n,t]));return e}();for(var[x,O]of(v.shuffle(k),k)){if(b>=w)break;m=J(x-s)+J(O-l);if(!(m<1)){var P=f[O][x];f[O][x]=on(N({py_name:"Merchant's Caravan",description:"A traveling merchant offers wares and wisdom.",danger:0,safe:!0,ascii:P.ascii,shop:!0})),b++}}return an(N({width:_,height:u,grid:f,seed:n}))}}}),_n="player",un=function(e,t,n){return V(t,$(n,e))},sn=function(e){return 50+e*e*25},ln=E("Player",[z],{__module__:_n,get __init__(){return j(this,function(e,t,n,r,o,a,i,_,u,s,l,f,c,p,d){if("undefined"==typeof d||null!=d&&d.hasOwnProperty("__kwargtrans__"))d=0;e.py_name=t,e.level=n,e.hp=r,e.max_hp=o,e.mp=a,e.max_mp=i,e.attack=_,e.defense=u,e.potions=s,e.known_spells=l,e.gold=f,e.weapon=c,e.armor=p,e.xp=d})},get is_alive(){return j(this,function(e){return e.hp>0})},get heal(){return j(this,function(e,t){var n=e.hp;return e.hp=un(e.hp+t,0,e.max_hp),e.hp-n})},get restore_mp(){return j(this,function(e,t){var n=e.mp;return e.mp=un(e.mp+D(t),0,e.max_mp),e.mp-n})},get add_xp(){return j(this,function(e,t){var n=[];e.xp+=t,n.append("You gain {} XP.".format(t));while(e.xp>=sn(e.level)){e.xp-=sn(e.level),e.level++;var r=5+e.level,o=1+Math.floor(e.level/3),a=0==Se(e.level,2)?1:0;e.max_hp+=r,e.attack+=o,e.defense+=a,e.hp=e.max_hp,n.append("Level up! You are now level {}. +{} HP, +{} ATK, +{} DEF. HP fully restored!".format(e.level,r,o,a))}return n})},get _get_total_attack(){return j(this,function(e){return e.attack+(e.weapon?e.weapon.attack_bonus:0)})},get _get_total_defense(){return j(this,function(e){return e.defense+(e.armor?e.armor.defense_bonus:0)})},get to_dict(){return j(this,function(e){return je({name:e.py_name,level:e.level,hp:e.hp,max_hp:e.max_hp,mp:e.mp,max_mp:e.max_mp,attack:e.attack,defense:e.defense,potions:e.potions,known_spells:e.known_spells,gold:e.gold,weapon:e.weapon?e.weapon.py_name:null,armor:e.armor?e.armor.py_name:null,xp:e.xp})})}});Object.defineProperty(ln,"total_defense",I.call(ln,ln._get_total_defense)),Object.defineProperty(ln,"total_attack",I.call(ln,ln._get_total_attack));try{var fn=window.navigator.language}catch(No){fn="en-US"}for(var cn=function(){return fn},pn=function(e){fn=e.headers["accept-language"].py_split(",")[0]},dn=new Date(0),hn=new Date,mn=[],gn=[],yn=new Date(1467662339080),vn=0;vn<7;vn++){for(var[wn,bn]of se([se([mn,"short"]),se([gn,"long"])]))wn.append(yn.toLocaleString(fn,je({weekday:bn})).lower());yn.setDate(yn.getDate()+1)}var kn=[],xn=[];for(yn=new Date(9466812e5),vn=0;vn<12;vn++){for(var[wn,bn]of se([se([kn,"short"]),se([xn,"long"])]))wn.append(yn.toLocaleString(fn,je({month:bn})).lower());yn.setMonth(yn.getMonth()+1)}var On=je({Y:0,m:1,d:2,H:3,M:4,S:5}),Pn=function(e,t,n){if(0==n)return[e];var r=e.py_split(t);if(!n)return r;var o=r.slice(0,n,1);return U(o)==U(r)||o.append(t.join(r.__getslice__(n,null,1))),o},Mn=function(e){var t=se([e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getDay()>0?e.getDay()-1:6,An(e,!0),Tn(e),e.getMilliseconds()]);return t},jn=function(e){var t=se([e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCDay()-1,An(e,!1),0,e.getUTCMilliseconds()]);return t},An=function(e,t){var n=0;if(e.getHours()+60*e.getTimezoneOffset()/3600<0)n=-1;var r=e.getTime(),o=e.setHours(23);e.setUTCDate(1),e.setUTCMonth(0),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0);var a=Z((o-e)/864e5);if(t||(a+=n),0==a){a=365;e.setTime(e.getTime()-86400);var i=e.getUTCFullYear();if(Sn(i))a=366}return e.setTime(r),a},Sn=function(e){return 0==Se(e,4)&&(0!=Se(e,100)||0==Se(e,400))},zn=function(e,t){var n=e.getTime();e.setDate(1);var r=[];for(var o of se([0,6]))e.setMonth(o),t?r.append(t(e)):r.append(e.getTimezoneOffset());return e.setTime(n),r},En=function(e){var t=zn(e);return t[0]!=t[1]?1:0},Tn=function(e){var t=zn(e);return $(t[0],t[1])==e.getTimezoneOffset()?1:0},Nn=function(e){var t=zn(e);return V(t[0],t[1])},In=function(e){try{return fe(e).py_split("(")[1].py_split(")")[0]}catch(No){return"n.a."}},Gn=function(e){var t=In(e),n=[t,t],r=zn(e,In),o=0;if(!Tn(e))o=1;for(var a of r)a!=t&&(n[o]=a);return se(n)},Cn=hn.getTimezoneOffset();if(!Tn(hn)){var qn=zn(hn);Cn=Cn==qn[1]?qn[0]:qn[1]}Cn*=60;var Ln=60*Nn(hn),Yn=En(hn),Un=Gn(hn),Rn=function(){return Date.now()/1e3},Hn=function(){return performance.now()/1e3},Dn=function(e){return Qn("%a %b %d %H:%M:%S %Y",e)},Fn=function(e){var t=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5],0);return(t-0)/1e3},Bn=function(e){if(!e)e=Rn();return Dn(Xn(e))},Xn=function(e){if(!e)e=Rn();return Wn(e,!0)},Wn=function(e,t){if(!e)e=Rn();var n=1e3*e;if(dn.setTime(n),t)var r=Mn(dn);else r=jn(dn);return r.__getslice__(null,9,1)},Kn=function(e,t){if(!t)t="%a %b %d %H:%M:%S %Y";var n=se([e,t]),r=n[0],o=n[1],a=function(e){var t=function(e){var t=[];if(!e)return se(["",""]);for(var n=0;n<U(e)-1;n++){var r=e[n];if("%"==r)break;t.append(r)}return se(["".join(t),e.__getslice__(n,null,1)])},n=se([null,null,null]),r=n[0],o=n[1],a=n[2];if(e)if("%"==e[0])r=e[1],n=t(e.__getslice__(2,null,1)),o=n[0],a=n[1];else n=t(e),o=n[0],a=n[1];return se([r,o,a])},i=je({});while(r){n=a(o);var _=n[0],u=n[1];o=n[2];if(""==u){var s=null;if(_){var l=-1;if("Y"==_)l=4;else if("a"==_)l=U(mn[0]);else if("A"==_)l=U(gn[0]);else if("b"==_)l=U(kn[0]);else if(L(_,se(["d","m","H","M","S"])))l=2;if(l>-1)s=[r.__getslice__(null,l,1),r.__getslice__(l,null,1)]}if(!s)s=[r,""]}else s=Pn(r,u,1);if(null!=_){n=se([s[1],s[0]]),r=n[0];if(i[_]=n[1],""==o)break}else var r=s[1]}var f=[1900,1,1,0,0,0,0,1,-1],c=[],p=!1;for(var[_,d]of i.py_items())if(!L(_,c)&&"p"!=_)if(L(_,On.py_keys()))f[On[_]]=D(d);else{if(L(_,se(["a","A","b","B"])))d=d.lower();if("m"==_&&(c.append("b"),c.append("B")),"a"==_){if(!L(d,mn)){var h=We("Weekday unknown in your locale");throw h.__cause__=null,h}p=!0;f[6]=mn.index(d)}else if("A"==_){if(!L(d,gn)){h=We("Weekday unknown in your locale");throw h.__cause__=null,h}p=!0;f[6]=gn.index(d)}else if("b"==_){if(!L(d,kn)){h=We("Month unknown in your locale");throw h.__cause__=null,h}f[1]=kn.index(d)+1}else if("B"==_){if(!L(d,xn)){h=We("Month unknown in your locale");throw h.__cause__=null,h}f[1]=xn.index(d)+1}else if("I"==_){var m=i["p"]||"am";m=m.lower(),d=D(d);if(12==d)var d=0;else if(d>12){h=We("time data '"+e+"' does not match format '"+t+"'");throw h.__cause__=null,h}"pm"==m&&(d+=12),f[On["H"]]=d}else"y"==_?f[0]=2e3+D(d):"Z"==_&&L(d.lower(),["gmt","utc"])&&(f[-1]=0)}var g=new Date(0);return g.setUTCFullYear(f[0]),g.setUTCMonth(f[1]-1),g.setUTCDate(f[2]),g.setUTCHours(f[3]),f[7]=An(g,!0),p||(f[6]=g.getUTCDay()-1),f},Qn=function(e,t){var n=function(e){return e<10?"0"+fe(e):e};if(!t)t=Xn();var r=e;for(var o of On.py_keys()){var a="%"+o;if(L(a,r)){var i=n(t[On[o]]);r=r.py_replace(a,i)}}for(var[o,_,u]of se([se(["b",kn,1]),se(["B",xn,1]),se(["a",mn,6]),se(["A",gn,6])])){var s=t[u];if(1==u)s=s-1;i=_[s].capitalize(),r=r.py_replace("%"+o,i)}if(L("%p",r)){if(t[3]>11)var l="PM";else l="AM";r=r.py_replace("%p",l)}if(L("%y",r))r=r.py_replace("%y",fe(t[0]).__getslice__(-2,null,1));if(L("%I",r)){i=t[3];if(0==i)i=12;else if(i>12)i=i-12;r=r.py_replace("%I",n(i))}return r},Vn="datetime",$n=function(e,t){e=fe(e);return U(e)<t?Ne(Ee("0",Ie(t,T(U,null,e))),e):e},Jn=function(e,t){e=fe(e);return U(e)<t?Ne(Ee(" ",Ie(t,T(U,null,e))),e):e},Zn=function(e,t){return e==t?0:e>t?1:-1},er=1,tr=9999,nr=3652059,rr=[-1,31,28,31,30,31,30,31,31,30,31,30,31],or=[-1],ar=0;for(var ir of rr.__getslice__(1,null,1))or.append(ar),ar+=ir;var _r=function(e){return 0==Se(e,4)&&(0!=Se(e,100)||0==Se(e,400))},ur=function(e){var t=e-1;return 365*t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)},sr=function(e,t){return 2==t&&_r(e)?29:rr[t]},lr=function(e,t){return or[t]+(t>2&&_r(e))},fr=function(e,t,n){sr(e,t);return ur(e)+lr(e,t)+n},cr=ur(401),pr=ur(101),dr=ur(5),hr=function(e){e--;var t=ot(e,cr),n=t[0],r=(e=t[1],400*n+1),o=(t=ot(e,pr),t[0]),a=(e=t[1],t=ot(e,dr),t[0]),i=(e=t[1],t=ot(e,365),t[0]);e=t[1];if(r+=100*o+4*a+i,4==i||4==o)return se([r-1,12,31]);var _=3==i&&(24!=a||3==o),u=e+50>>5,s=or[u]+(u>2&&_);return s>e&&(u--,s-=rr[u]+(2==u&&_)),e-=s,se([r,u,e+1])},mr=[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],gr=[null,"Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yr=function(e,t,n,r,o,a,i){var _=Se(fr(e,t,n)+6,7),u=lr(e,t)+n;return se([e,t,n,r,o,a,_,u,i])},vr=function(e,t,n,r){var o="{}:{}:{}".format($n(e,2),$n(t,2),$n(n,2));return r&&(o+=".{}".format($n(r,6))),o},wr=function(e,t,n){var r=null,o=null,a=null,i=[],_=se([0,U(t)]),u=_[0],s=_[1];while(u<s){var l=t[u];if(u++,"%"==l)if(u<s){l=t[u];if(u++,"f"==l){if(null===r)r="{}".format($n(C(e,"microsecond",0),6));i.append(r)}else if("z"==l){if(null===o){o="";if(q(e,"utcoffset")){var f=e.utcoffset();if(null!==f){var c="+";if(f.days<0)f=-f,c="-";_=ot(f,Sr(N({hours:1})));var p=_[0],d=_[1];d=Math.floor(d/Sr(N({minutes:1}))),o="{}{}{}".format(c,$n(p,2),$n(d,2))}}}i.append(o)}else if("Z"==l){if(null===a){a="";if(q(e,"tzname")){var h=e.tzname();if(null!==h)a=h.py_replace("%","%%")}}i.append(a)}else i.append("%"),i.append(l)}else i.append("%");else i.append(l)}i="".join(i);return Qn(i,n)},br=function(e){if(null!==e&&!W(e,fe)){var t=Je("tzinfo.tzname() must return None or string, not '{}'".format(B(e)));throw t.__cause__=null,t}},kr=function(e,t){if(null!==t){if(!W(t,Sr)){var n=Je("tzinfo.{}() must return None or timedelta, not '{}'".format(e,B(t)));throw n.__cause__=null,n}if(t.__mod__(Sr(N({minutes:1}))).microseconds||t.microseconds){n=We("tzinfo.{}() must return a whole number of minutes, got {}".format(e,t));throw n.__cause__=null,n}if(!Ce(ze(T(Sr,null,1)),t)||!Ce(t,T(Sr,null,1))){n=T(We,null,function(){var n="{}()={}, must be must be strictly between -timedelta(hours=24) and timedelta(hours=24)";return T(n.format,n,e,t)}());throw n.__cause__=null,n}}},xr=function(e){var t=B(e);if(t==D)return e;if(t!=H){try{e=e.__int__();try{if(B(e)==D)return e;var n=Je("__int__ returned non-int (type {})".format(B(e).__name__));throw n.__cause__=null,n}catch(n){}}catch(n){if(!W(n,$e))throw n}n=Je("an integer is required (got type {})".format(B(e).__name__));throw n.__cause__=null,n}n=Je("integer argument expected, got float");throw n.__cause__=null,n},Or=function(e,t,n){e=xr(e),t=xr(t),n=xr(n);if(!(er<=e&&e<=tr)){var r=We("year must be in {}..{}".format(er,tr),e);throw r.__cause__=null,r}if(!(1<=t&&t<=12)){r=We("month must be in 1..12",t);throw r.__cause__=null,r}var o=sr(e,t);if(!(1<=n&&n<=o)){r=We("day must be in 1..{}".format(o),n);throw r.__cause__=null,r}return se([e,t,n])},Pr=function(e,t,n,r){e=xr(e),t=xr(t),n=xr(n),r=xr(r);if(!(0<=e&&e<=23)){var o=We("hour must be in 0..23",e);throw o.__cause__=null,o}if(!(0<=t&&t<=59)){o=We("minute must be in 0..59",t);throw o.__cause__=null,o}if(!(0<=n&&n<=59)){o=We("second must be in 0..59",n);throw o.__cause__=null,o}if(!(0<=r&&r<=999999)){o=We("microsecond must be in 0..999999",r);throw o.__cause__=null,o}return se([e,t,n,r])},Mr=function(e){if(null!==e&&!W(e,qr)){var t=Je("tzinfo argument must be None or of a tzinfo subclass");throw t.__cause__=null,t}},jr=function(e,t){var n=Je("can't compare '{}' to '{}'".format(B(e).__name__,B(t).__name__));throw n.__cause__=null,n},Ar=function(e,t){var n=ot(e,t),r=n[0],o=n[1];o*=2;var a=t>0?o>t:o<t;return(a||o==t&&1==Se(r,2))&&r++,r},Sr=E("timedelta",[z],{__module__:Vn,get __init__(){return j(this,function(e,t,n,r,o,a,i,_){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=0;if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if("undefined"==typeof i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=0;if("undefined"==typeof _||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if(arguments.length){var u=arguments.length-1;if(arguments[u]&&arguments[u].hasOwnProperty("__kwargtrans__")){var s=arguments[u--];for(var l in s)switch(l){case"self":e=s[l];break;case"days":t=s[l];break;case"seconds":n=s[l];break;case"microseconds":r=s[l];break;case"milliseconds":o=s[l];break;case"minutes":a=s[l];break;case"hours":i=s[l];break;case"weeks":_=s[l];break}}}var f=0,c=f,p=f,d=f;if(t+=7*_,n+=60*a+3600*i,r+=1e3*o,W(t,H)){f=Rt(t);var h=f[0],m=(t=f[1],f=Rt(86400*h),f[0]),g=f[1];p=D(g),c=D(t)}else m=0,c=t;if(W(n,H)){f=Rt(n);var y=f[0];n=f[1],n=D(n);y+=m}else y=m;f=ot(n,86400),t=f[0],n=f[1];c+=t,p+=D(n);var v=1e6*y;if(W(r,H)){r=Z(r+v),f=ot(r,1e6),n=f[0],r=f[1],f=ot(n,86400),t=f[0],n=f[1];c+=t,p+=n}else{r=D(r),f=ot(r,1e6),n=f[0],r=f[1],f=ot(n,86400),t=f[0],n=f[1];c+=t,p+=n;r=Z(r+v)}f=ot(r,1e6),n=f[0],d=f[1];p+=n;f=ot(p,86400),t=f[0],p=f[1];if(c+=t,J(c)>999999999){var w=OverflowError(Se("timedelta # of days is too large: %d",c));throw w.__cause__=null,w}e._days=c,e._seconds=p,e._microseconds=d})},get __repr__(){return j(this,function(e){return e._microseconds?"datetime.timedelta(days={}, seconds={}, microseconds={})".format(e._days,e._seconds,e._microseconds):e._seconds?"datetime.timedelta(days={}, seconds={})".format(e._days,e._seconds):"datetime.timedelta(days={})".format(e._days)})},get __str__(){return j(this,function(e){var t=ot(e._seconds,60),n=t[0],r=t[1],o=(t=ot(n,60),t[0]),a=(n=t[1],"{}:{}:{}".format(o,$n(n,2),$n(r,2)));if(e._days){var i=function(e){return se([e,1!=J(e)?"s":""])};a="{} day{}, ".format(i(e._days))+a}if(e._microseconds)a=a+".{}".format($n(e._microseconds,6));return a})},get total_seconds(){return j(this,function(e){return((86400*e.days+e.seconds)*Math.pow(10,6)+e.microseconds)/Math.pow(10,6)})},get _get_days(){return j(this,function(e){return e._days})},get _get_seconds(){return j(this,function(e){return e._seconds})},get _get_microseconds(){return j(this,function(e){return e._microseconds})},get __add__(){return j(this,function(e,t){return W(t,Sr)?Sr(e._days+t._days,e._seconds+t._seconds,e._microseconds+t._microseconds):NotImplemented})},get __radd__(){return j(this,function(e,t){return e.__add__(t)})},get __sub__(){return j(this,function(e,t){return W(t,Sr)?Sr(e._days-t._days,e._seconds-t._seconds,e._microseconds-t._microseconds):NotImplemented})},get __rsub__(){return j(this,function(e,t){return W(t,Sr)?-e+t:NotImplemented})},get __neg__(){return j(this,function(e){return Sr(-e._days,-e._seconds,-e._microseconds)})},get __pos__(){return j(this,function(e){return e})},get __abs__(){return j(this,function(e){return e._days<0?ze(e):e})},get __mul__(){return j(this,function(e,t){if(W(t,D))return Sr(e._days*t,e._seconds*t,e._microseconds*t);if(W(t,H)){var n=e._to_microseconds(),r=t.as_integer_ratio(),o=r[0],a=r[1];return Sr(0,0,Ar(n*o,a))}return NotImplemented})},get __rmul__(){return j(this,function(e,t){return e.__mul__(t)})},get _to_microseconds(){return j(this,function(e){return 1e6*(86400*e._days+e._seconds)+e._microseconds})},get __floordiv__(){return j(this,function(e,t){if(!W(t,se([D,Sr])))return NotImplemented;var n=e._to_microseconds();return W(t,Sr)?Math.floor(n/t._to_microseconds()):W(t,D)?Sr(0,0,Math.floor(n/t)):void 0})},get __truediv__(){return j(this,function(e,t){if(!W(t,se([D,H,Sr])))return NotImplemented;var n=e._to_microseconds();if(W(t,Sr))return n/t._to_microseconds();if(W(t,D))return Sr(0,0,Ar(n,t));if(W(t,H)){var r=t.as_integer_ratio(),o=r[0],a=r[1];return Sr(0,0,Ar(a*n,o))}})},get __mod__(){return j(this,function(e,t){if(W(t,Sr)){var n=Se(e._to_microseconds(),t._to_microseconds());return Sr(0,0,n)}return NotImplemented})},get __divmod__(){return j(this,function(e,t){if(W(t,Sr)){var n=ot(e._to_microseconds(),t._to_microseconds()),r=n[0],o=n[1];return se([r,Sr(0,0,o)])}return NotImplemented})},get __eq__(){return j(this,function(e,t){return!!W(t,Sr)&&0==e._cmp(t)})},get __le__(){return j(this,function(e,t){if(W(t,Sr))return e._cmp(t)<=0;jr(e,t)})},get __lt__(){return j(this,function(e,t){if(W(t,Sr))return e._cmp(t)<0;jr(e,t)})},get __ge__(){return j(this,function(e,t){if(W(t,Sr))return e._cmp(t)>=0;jr(e,t)})},get __gt__(){return j(this,function(e,t){if(W(t,Sr))return e._cmp(t)>0;jr(e,t)})},get _cmp(){return j(this,function(e,t){return Zn(e._to_microseconds(),t._to_microseconds())})},get __bool__(){return j(this,function(e){return 0!=e._days||0!=e._seconds||0!=e._microseconds})}});Object.defineProperty(Sr,"microseconds",I.call(Sr,Sr._get_microseconds)),Object.defineProperty(Sr,"seconds",I.call(Sr,Sr._get_seconds)),Object.defineProperty(Sr,"days",I.call(Sr,Sr._get_days));var zr=Sr(-999999999),Er=Sr(N({days:999999999,hours:23,minutes:59,seconds:59,microseconds:999999})),Tr=Sr(N({microseconds:1}));Object.defineProperty(Sr,"min",{get:function(){return zr}}),Object.defineProperty(Sr,"max",{get:function(){return Er}}),Object.defineProperty(Sr,"resolution",{get:function(){return Tr}});var Nr=E("date",[z],{__module__:Vn,get __init__(){return j(this,function(e,t,n,r){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var a=arguments[o--];for(var i in a)switch(i){case"self":e=a[i];break;case"year":t=a[i];break;case"month":n=a[i];break;case"day":r=a[i];break}}}var _=Or(t,n,r);t=_[0],n=_[1],r=_[2];e._year=t,e._month=n,e._day=r})},get fromtimestamp(){return A(this,function(e,t){var n=Xn(t),r=n[0],o=n[1],a=n[2];n[3],n[4],n[5],n[6],n[7],n[8];return e(r,o,a)})},get today(){return A(this,function(e){var t=Rn();return e.fromtimestamp(t)})},get fromordinal(){return A(this,function(e,t){var n=hr(t),r=n[0],o=n[1],a=n[2];return e(r,o,a)})},get __repr__(){return j(this,function(e){return"datetime.date({}, {}, {})".format(e._year,e._month,e._day)})},get ctime(){return j(this,function(e){var t=Se(e.toordinal(),7)||7;return"{} {} {} 00:00:00 {}".format(gr[t],mr[e._month],Jn(e._day,2),$n(e._year,4))})},get strftime(){return j(this,function(e,t){return wr(e,t,e.timetuple())})},get __format__(){return j(this,function(e,t){if(!W(t,fe)){var n=Je("must be str, not {}".format(B(t).__name__));throw n.__cause__=null,n}return 0!=U(t)?e.strftime(t):fe(e)})},get isoformat(){return j(this,function(e){return"{}-{}-{}".format($n(e._year,4),$n(e._month,2),$n(e._day,2))})},get __str__(){return j(this,function(e){return e.isoformat()})},get _get_year(){return j(this,function(e){return e._year})},get _get_month(){return j(this,function(e){return e._month})},get _get_day(){return j(this,function(e){return e._day})},get timetuple(){return j(this,function(e){return yr(e._year,e._month,e._day,0,0,0,-1)})},get toordinal(){return j(this,function(e){return fr(e._year,e._month,e._day)})},get py_replace(){return j(this,function(e,t,n,r){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if(arguments.length){var o=arguments.length-1;if(arguments[o]&&arguments[o].hasOwnProperty("__kwargtrans__")){var a=arguments[o--];for(var i in a)switch(i){case"self":e=a[i];break;case"year":t=a[i];break;case"month":n=a[i];break;case"day":r=a[i];break}}}if(null===t)t=e._year;if(null===n)n=e._month;if(null===r)r=e._day;return Nr(t,n,r)})},get __eq__(){return j(this,function(e,t){return W(t,Nr)?0==e._cmp(t):NotImplemented})},get __le__(){return j(this,function(e,t){return W(t,Nr)?e._cmp(t)<=0:NotImplemented})},get __lt__(){return j(this,function(e,t){return W(t,Nr)?e._cmp(t)<0:NotImplemented})},get __ge__(){return j(this,function(e,t){return W(t,Nr)?e._cmp(t)>=0:NotImplemented})},get __gt__(){return j(this,function(e,t){return W(t,Nr)?e._cmp(t)>0:NotImplemented})},get _cmp(){return j(this,function(e,t){var n=se([e._year,e._month,e._day]),r=n[0],o=n[1],a=n[2],i=(n=se([t._year,t._month,t._day]),n[0]),_=n[1],u=n[2];return Zn("{}{}{}".format($n(r,4),$n(o,2),$n(a,2)),"{}{}{}".format($n(i,4),$n(_,2),$n(u,2)))})},get __add__(){return j(this,function(e,t){if(W(t,Sr)){var n=e.toordinal()+t.days;if(0<n&&n<=nr)return Nr.fromordinal(n);var r=OverflowError("result out of range");throw r.__cause__=null,r}return NotImplemented})},get __radd__(){return j(this,function(e,t){return e.__add__(t)})},get __sub__(){return j(this,function(e,t){if(W(t,Sr))return Ne(e,T(Sr,null,ze(t.days)));if(W(t,Nr)){var n=e.toordinal(),r=t.toordinal();return T(Sr,null,Ie(n,r))}return NotImplemented})},get weekday(){return j(this,function(e){return Se(e.toordinal()+6,7)})},get isoweekday(){return j(this,function(e){return Se(e.toordinal(),7)||7})},get isocalendar(){return j(this,function(e){var t=e._year,n=Br(t),r=fr(e._year,e._month,e._day),o=ot(r-n,7),a=o[0],i=o[1];if(a<0){t--;n=Br(t),o=ot(r-n,7),a=o[0],i=o[1]}else if(a>=52&&r>=Br(t+1)){t++;a=0}return se([t,a+1,i+1])})},resolution:Sr(N({days:1}))});Object.defineProperty(Nr,"day",I.call(Nr,Nr._get_day)),Object.defineProperty(Nr,"month",I.call(Nr,Nr._get_month)),Object.defineProperty(Nr,"year",I.call(Nr,Nr._get_year));var Ir=Nr,Gr=Nr(1,1,1),Cr=Nr(9999,12,31);Object.defineProperty(Nr,"min",{get:function(){return Gr}}),Object.defineProperty(Nr,"max",{get:function(){return Cr}});var qr=E("tzinfo",[z],{__module__:Vn,get tzname(){return j(this,function(e,t){var n=Qe("tzinfo subclass must override tzname()");throw n.__cause__=null,n})},get utcoffset(){return j(this,function(e,t){var n=Qe("tzinfo subclass must override utcoffset()");throw n.__cause__=null,n})},get dst(){return j(this,function(e,t){var n=Qe("tzinfo subclass must override dst()");throw n.__cause__=null,n})},get fromutc(){return j(this,function(e,t){if(!W(t,Hr)){var n=Je("fromutc() requires a datetime argument");throw n.__cause__=null,n}if(t.tzinfo!==e){n=We("dt.tzinfo is not self");throw n.__cause__=null,n}var r=t.utcoffset();if(null===r){n=We("fromutc() requires a non-None utcoffset() result");throw n.__cause__=null,n}var o=t.dst();if(null===o){n=We("fromutc() requires a non-None dst() result");throw n.__cause__=null,n}var a=r-o;if(a){t+=a;o=t.dst();if(null===o){n=We("fromutc(): dt.dst gave inconsistent results; cannot convert");throw n.__cause__=null,n}}return t+o})}}),Lr=E("time",[z],{__module__:Vn,get __init__(){return j(this,function(e,t,n,r,o,a){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=0;if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=0;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=0;if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=0;if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var _=arguments[i--];for(var u in _)switch(u){case"self":e=_[u];break;case"hour":t=_[u];break;case"minute":n=_[u];break;case"second":r=_[u];break;case"microsecond":o=_[u];break;case"tzinfo":a=_[u];break}}}var s=Pr(t,n,r,o);t=s[0],n=s[1],r=s[2],o=s[3];Mr(a),e._hour=t,e._minute=n,e._second=r,e._microsecond=o,e._tzinfo=a})},get _get_hour(){return j(this,function(e){return e._hour})},get _get_minute(){return j(this,function(e){return e._minute})},get _get_second(){return j(this,function(e){return e._second})},get _get_microsecond(){return j(this,function(e){return e._microsecond})},get _get_tzinfo(){return j(this,function(e){return e._tzinfo})},get __eq__(){return j(this,function(e,t){return!!W(t,Lr)&&0==e._cmp(t,N({allow_mixed:!0}))})},get __le__(){return j(this,function(e,t){if(W(t,Lr))return e._cmp(t)<=0;jr(e,t)})},get __lt__(){return j(this,function(e,t){if(W(t,Lr))return e._cmp(t)<0;jr(e,t)})},get __ge__(){return j(this,function(e,t){if(W(t,Lr))return e._cmp(t)>=0;jr(e,t)})},get __gt__(){return j(this,function(e,t){if(W(t,Lr))return e._cmp(t)>0;jr(e,t)})},get _cmp(){return j(this,function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"self":e=o[a];break;case"other":t=o[a];break;case"allow_mixed":n=o[a];break}}}var i=e._tzinfo,_=t._tzinfo,u=null,s=u,l=u;if(i===_)var f=!0;else s=e.utcoffset(),l=t.utcoffset(),f=s==l;if(f)return Zn(se([e._hour,e._minute,e._second,e._microsecond]),se([t._hour,t._minute,t._second,t._microsecond]));if(null===s||null===l){if(n)return 2;var c=Je("cannot compare naive and aware times");throw c.__cause__=null,c}var p=Ie(Ne(Ee(e._hour,60),e._minute),Te(s,T(Sr,null,N({minutes:1})))),d=Ie(Ne(Ee(t._hour,60),t._minute),Te(l,T(Sr,null,N({minutes:1}))));return Zn(se([p,e._second,e._microsecond]),se([d,t._second,t._microsecond]))})},get _tzstr(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=":";var n=e.utcoffset();if(null!==n){if(n.days<0){var r="-";n=-n}else r="+";var o=ot(n,Sr(N({hours:1}))),a=o[0],i=o[1];i=Math.floor(i/Sr(N({minutes:1}))),n="{}{}{}{}".format(r,$n(a,2),t,$n(i,2))}return n})},get __repr__(){return j(this,function(e){if(0!=e._microsecond)var t=", {}, {}".format(e._second,e._microsecond);else if(0!=e._second)t=", {}".format(e._second);else t="";t="datetime.time({}, {}{})".format(e._hour,e._minute,t);if(null!==e._tzinfo)t=t.__getslice__(null,U(t)-1,1)+", tzinfo={}".format(e._tzinfo.__repr__())+")";return t})},get isoformat(){return j(this,function(e){var t=vr(e._hour,e._minute,e._second,e._microsecond),n=e._tzstr();return n&&(t+=n),t})},get __str__(){return j(this,function(e){return e.isoformat()})},get strftime(){return j(this,function(e,t){var n=se([1900,1,1,e._hour,e._minute,e._second,0,1,-1]);return wr(e,t,n)})},get __format__(){return j(this,function(e,t){if(!W(t,fe)){var n=Je(Se("must be str, not %s",B(t).__name__));throw n.__cause__=null,n}return 0!=U(t)?e.strftime(t):fe(e)})},get utcoffset(){return j(this,function(e){if(null===e._tzinfo)return null;var t=e._tzinfo.utcoffset(null);return kr("utcoffset",t),t})},get tzname(){return j(this,function(e){if(null===e._tzinfo)return null;var t=e._tzinfo.tzname(null);return br(t),t})},get dst(){return j(this,function(e){if(null===e._tzinfo)return null;var t=e._tzinfo.dst(null);return kr("dst",t),t})},get py_replace(){return j(this,function(e,t,n,r,o,a){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if(arguments.length){var i=arguments.length-1;if(arguments[i]&&arguments[i].hasOwnProperty("__kwargtrans__")){var _=arguments[i--];for(var u in _)switch(u){case"self":e=_[u];break;case"hour":t=_[u];break;case"minute":n=_[u];break;case"second":r=_[u];break;case"microsecond":o=_[u];break;case"tzinfo":a=_[u];break}}}if(null===t)t=e.hour;if(null===n)n=e.minute;if(null===r)r=e.second;if(null===o)o=e.microsecond;if(!0===a)a=e.tzinfo;return Lr(t,n,r,o,a)})},resolution:Sr(N({microseconds:1}))});Object.defineProperty(Lr,"tzinfo",I.call(Lr,Lr._get_tzinfo)),Object.defineProperty(Lr,"microsecond",I.call(Lr,Lr._get_microsecond)),Object.defineProperty(Lr,"second",I.call(Lr,Lr._get_second)),Object.defineProperty(Lr,"minute",I.call(Lr,Lr._get_minute)),Object.defineProperty(Lr,"hour",I.call(Lr,Lr._get_hour));var Yr=Lr,Ur=Lr(0,0,0),Rr=Lr(23,59,59,999999);Object.defineProperty(Lr,"min",{get:function(){return Ur}}),Object.defineProperty(Lr,"max",{get:function(){return Rr}});var Hr=E("datetime",[Nr],{__module__:Vn,get __init__(){return j(this,function(e,t,n,r,o,a,i,_,u){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=0;if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=0;if("undefined"==typeof i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=0;if("undefined"==typeof _||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=0;if("undefined"==typeof u||null!=u&&u.hasOwnProperty("__kwargtrans__"))u=null;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var l=arguments[s--];for(var f in l)switch(f){case"self":e=l[f];break;case"year":t=l[f];break;case"month":n=l[f];break;case"day":r=l[f];break;case"hour":o=l[f];break;case"minute":a=l[f];break;case"second":i=l[f];break;case"microsecond":_=l[f];break;case"tzinfo":u=l[f];break}}}var c=Or(t,n,r);t=c[0],n=c[1],r=c[2],c=Pr(o,a,i,_),o=c[0],a=c[1],i=c[2],_=c[3];Mr(u),e._year=t,e._month=n,e._day=r,e._hour=o,e._minute=a,e._second=i,e._microsecond=_,e._tzinfo=u})},get _get_hour(){return j(this,function(e){return e._hour})},get _get_minute(){return j(this,function(e){return e._minute})},get _get_second(){return j(this,function(e){return e._second})},get _get_microsecond(){return j(this,function(e){return e._microsecond})},get _get_tzinfo(){return j(this,function(e){return e._tzinfo})},get _fromtimestamp(){return A(this,function(e,t,n,r){var o=Rt(t),a=o[0],i=(t=o[1],Z(1e6*a));i>=1e6?(t++,i-=1e6):i<0&&(t--,i+=1e6);var _=n?Wn:Xn,u=(o=_(t),o[0]),s=o[1],l=o[2],f=o[3],c=o[4],p=o[5];o[6],o[7],o[8],p=$(p,59);return e(u,s,l,f,c,p,i,r)})},get fromtimestamp(){return A(this,function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;Mr(n);var r=e._fromtimestamp(t,null!==n,n);if(null!==n)r=n.fromutc(r);return r})},get utcfromtimestamp(){return A(this,function(e,t){return e._fromtimestamp(t,!0,null)})},get now(){return A(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var n=Rn();return e.fromtimestamp(n,t)})},get utcnow(){return A(this,function(e){var t=Rn();return e.utcfromtimestamp(t)})},get combine(){return A(this,function(e,t,n){if(!W(t,Ir)){var r=Je("date argument must be a date instance");throw r.__cause__=null,r}if(!W(n,Yr)){r=Je("time argument must be a time instance");throw r.__cause__=null,r}return e(t.year,t.month,t.day,n.hour,n.minute,n.second,n.microsecond,n.tzinfo)})},get timetuple(){return j(this,function(e){var t=e.dst();if(null===t)t=-1;else if(t)t=1;else t=0;return yr(e.year,e.month,e.day,e.hour,e.minute,e.second,t)})},get timestamp(){return j(this,function(e){return null===e._tzinfo?Fn(se([e.year,e.month,e.day,e.hour,e.minute,e.second,-1,-1,-1]))+e.microsecond/1e6:function(){var t=Ie(e,$r);return T(t.total_seconds,t)}()})},get utctimetuple(){return j(this,function(e){var t=e.utcoffset();if(t)e=T(Ue,null,e,t);var n=se([e.year,e.month,e.day]),r=n[0],o=n[1],a=n[2],i=(n=se([e.hour,e.minute,e.second]),n[0]),_=n[1],u=n[2];return yr(r,o,a,i,_,u,0)})},get date(){return j(this,function(e){return Nr(e._year,e._month,e._day)})},get time(){return j(this,function(e){return Lr(e.hour,e.minute,e.second,e.microsecond)})},get timetz(){return j(this,function(e){return Lr(e.hour,e.minute,e.second,e.microsecond,e._tzinfo)})},get py_replace(){return j(this,function(e,t,n,r,o,a,i,_,u){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;if("undefined"==typeof r||null!=r&&r.hasOwnProperty("__kwargtrans__"))r=null;if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o=null;if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=null;if("undefined"==typeof i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;if("undefined"==typeof _||null!=_&&_.hasOwnProperty("__kwargtrans__"))_=null;if("undefined"==typeof u||null!=u&&u.hasOwnProperty("__kwargtrans__"))u=!0;if(arguments.length){var s=arguments.length-1;if(arguments[s]&&arguments[s].hasOwnProperty("__kwargtrans__")){var l=arguments[s--];for(var f in l)switch(f){case"self":e=l[f];break;case"year":t=l[f];break;case"month":n=l[f];break;case"day":r=l[f];break;case"hour":o=l[f];break;case"minute":a=l[f];break;case"second":i=l[f];break;case"microsecond":_=l[f];break;case"tzinfo":u=l[f];break}}}if(null===t)t=e.year;if(null===n)n=e.month;if(null===r)r=e.day;if(null===o)o=e.hour;if(null===a)a=e.minute;if(null===i)i=e.second;if(null===_)_=e.microsecond;if(!0===u)u=e.tzinfo;return Hr(t,n,r,o,a,i,_,u)})},get astimezone(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;if(arguments.length){var n=arguments.length-1;if(arguments[n]&&arguments[n].hasOwnProperty("__kwargtrans__")){var r=arguments[n--];for(var o in r)switch(o){case"self":e=r[o];break;case"tz":t=r[o];break}}}if(null===t){if(null===e.tzinfo){var i=We("astimezone() requires an aware datetime");throw i.__cause__=null,i}var _=Te(Ie(e,$r),T(Sr,null,N({seconds:1}))),u=Xn(_),s=Hr(...u.__getslice__(null,6,1));if(U(u)>9){var l=u[10],f=u[9];t=Wr(Sr(N({seconds:l})),f)}else{var c=Ie(s,T(Hr,null,...He(function(){var e=a;return T(e.gmtime,e,_)}(),null,6,1))),p=Yn&&Le(Re(u,8),0);l=ze(p?Cn:Ln);if(Ge(c,T(Sr,null,N({seconds:l}))))t=T(Wr,null,c,Re(Un,p?1:0));else t=T(Wr,null,c)}}else if(!W(t,qr)){i=Je("tz argument must be an instance of tzinfo");throw i.__cause__=null,i}var d=e.tzinfo;if(null===d){i=We("astimezone() requires an aware datetime");throw i.__cause__=null,i}if(t===d)return e;var h=e.utcoffset();if(null===h){i=We("astimezone() requires an aware datetime");throw i.__cause__=null,i}var m=function(){var n=Ie(e,h);return T(n.py_replace,n,N({tzinfo:t}))}();return t.fromutc(m)})},get ctime(){return j(this,function(e){var t=Se(e.toordinal(),7)||7;return"{} {} {} {}:{}:{} {}".format(gr[t],mr[e._month],$n(e._day,2),$n(e._hour,2),$n(e._minute,2),$n(e._second,2),$n(e._year,4))})},get isoformat(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t="T";var n="{}-{}-{}{}".format($n(e._year,4),$n(e._month,2),$n(e._day,2),t)+vr(e._hour,e._minute,e._second,e._microsecond),r=e.utcoffset();if(null!==r){if(r.days<0){var o="-";r=-r}else o="+";var a=ot(r,Sr(N({hours:1}))),i=a[0],_=a[1];_=Math.floor(_/Sr(N({minutes:1})));n+="{}{}:{}".format(o,$n(i,2),$n(_,2))}return n})},get __repr__(){return j(this,function(e){var t=[e._year,e._month,e._day,e._hour,e._minute,e._second,e._microsecond];0==t[U(t)-1]&&t.py_pop(),0==t[U(t)-1]&&t.py_pop();var n="datetime.datetime({})".format(", ".join(rt(fe,t)));if(null!==e._tzinfo)n=n.__getslice__(null,U(n)-1,1)+", tzinfo={}".format(e._tzinfo.__repr__())+")";return n})},get __str__(){return j(this,function(e){return e.isoformat(N({sep:" "}))})},get strptime(){return A(this,function(e,t,n){return e(...Kn(t,n).__getslice__(null,6,1))})},get utcoffset(){return j(this,function(e){if(null===e._tzinfo)return null;var t=e._tzinfo.utcoffset(e);return kr("utcoffset",t),t})},get tzname(){return j(this,function(e){if(null===e._tzinfo)return null;var t=e._tzinfo.tzname(e);return br(t),t})},get dst(){return j(this,function(e){if(null===e._tzinfo)return null;var t=e._tzinfo.dst(e);return kr("dst",t),t})},get __eq__(){return j(this,function(e,t){return W(t,Hr)?0==e._cmp(t,N({allow_mixed:!0})):!W(t,Nr)&&NotImplemented})},get __le__(){return j(this,function(e,t){return W(t,Hr)?e._cmp(t)<=0:W(t,Nr)?void jr(e,t):NotImplemented})},get __lt__(){return j(this,function(e,t){return W(t,Hr)?e._cmp(t)<0:W(t,Nr)?void jr(e,t):NotImplemented})},get __ge__(){return j(this,function(e,t){return W(t,Hr)?e._cmp(t)>=0:W(t,Nr)?void jr(e,t):NotImplemented})},get __gt__(){return j(this,function(e,t){return W(t,Hr)?e._cmp(t)>0:W(t,Nr)?void jr(e,t):NotImplemented})},get _cmp(){return j(this,function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=!1;var r=e._tzinfo,o=t._tzinfo,a=null,i=a,_=a;if(r===o)var u=!0;else i=e.utcoffset(),_=t.utcoffset(),u=i==_;if(u){var s="{}{}{}{}{}{}{}".format($n(e._year,4),$n(e._month,2),$n(e._day,2),$n(e._hour,2),$n(e._minute,2),$n(e._second,2),$n(e._microsecond,6)),l="{}{}{}{}{}{}{}".format($n(t._year,4),$n(t._month,2),$n(t._day,2),$n(t._hour,2),$n(t._minute,2),$n(t._second,2),$n(t._microsecond,6));return Zn(s,l)}if(null===i||null===_){if(n)return 2;var f=Je("cannot compare naive and aware datetimes");throw f.__cause__=null,f}var c=Ie(e,t);return c.days<0?-1:c?1:0})},get __add__(){return j(this,function(e,t){if(!W(t,Sr))return NotImplemented;var n=Sr(e.toordinal(),N({hours:e._hour,minutes:e._minute,seconds:e._second,microseconds:e._microsecond})),r=(n=T(Ye,null,n,t),ot(n.seconds,3600)),o=r[0],a=r[1],i=(r=ot(a,60),r[0]),_=r[1];if(0<n.days&&n.days<=nr)return Hr.combine(Nr.fromordinal(n.days),Lr(o,i,_,n.microseconds,N({tzinfo:e._tzinfo})));var u=OverflowError("result out of range");throw u.__cause__=null,u})},get __radd__(){return j(this,function(e,t){return e.__add__(t)})},get __sub__(){return j(this,function(e,t){if(!W(t,Hr))return W(t,Sr)?Ne(e,ze(t)):NotImplemented;var n=e.toordinal(),r=t.toordinal(),o=e._second+60*e._minute+3600*e._hour,a=t._second+60*t._minute+3600*t._hour,i=Sr(n-r,o-a,e._microsecond-t._microsecond);if(e._tzinfo===t._tzinfo)return i;var _=e.utcoffset(),u=t.utcoffset();if(_==u)return i;if(null===_||null===u){var s=Je("cannot mix naive and timezone-aware time");throw s.__cause__=null,s}return Ie(Ne(i,u),_)})},resolution:Sr(N({microseconds:1}))});Object.defineProperty(Hr,"tzinfo",I.call(Hr,Hr._get_tzinfo)),Object.defineProperty(Hr,"microsecond",I.call(Hr,Hr._get_microsecond)),Object.defineProperty(Hr,"second",I.call(Hr,Hr._get_second)),Object.defineProperty(Hr,"minute",I.call(Hr,Hr._get_minute)),Object.defineProperty(Hr,"hour",I.call(Hr,Hr._get_hour));var Dr=Hr(1,1,1),Fr=Hr(9999,12,31,23,59,59,999999);Object.defineProperty(Hr,"min",{get:function(){return Dr}}),Object.defineProperty(Hr,"max",{get:function(){return Fr}});var Br=function(e){var t=3,n=fr(e,1,1),r=Se(n+6,7),o=n-r;return r>t&&(o+=7),o},Xr="@#$^&$^",Wr=E("timezone",[qr],{__module__:Vn,get __init__(){return j(this,function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=Xr;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"self":e=o[a];break;case"offset":t=o[a];break;case"py_name":n=o[a];break}}}if(!W(t,Sr)){var i=Je("offset must be a timedelta");throw i.__cause__=null,i}if(n===Xr){if(!t)t=e.utc;n=null}else if(!W(n,fe)){i=Je("name must be a string");throw i.__cause__=null,i}if(!qe(e._minoffset,t)||!qe(t,e._maxoffset)){i=T(We,null,"offset must be a timedelta strictly between -timedelta(hours=24) and timedelta(hours=24).");throw i.__cause__=null,i}if(0!=t.microseconds||0!=Se(t.seconds,60)){i=We("offset must be a timedelta representing a whole number of minutes");throw i.__cause__=null,i}e._offset=t,e._name=n})},get _create(){return A(this,function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=Xr;if(arguments.length){var r=arguments.length-1;if(arguments[r]&&arguments[r].hasOwnProperty("__kwargtrans__")){var o=arguments[r--];for(var a in o)switch(a){case"cls":e=o[a];break;case"offset":t=o[a];break;case"py_name":n=o[a];break}}}return e(t,n)})},get __eq__(){return j(this,function(e,t){return B(t)==Wr&&e._offset==t._offset})},get __repr__(){return j(this,function(e){return e===e.utc?"datetime.timezone.utc":null===e._name?"datetime.timezone({})".format(e._offset.__repr__()):"datetime.timezone({}, {})".format(e._offset.__repr__(),e._name.__repr__())})},get __str__(){return j(this,function(e){return e.tzname(null)})},get utcoffset(){return j(this,function(e,t){if(W(t,Hr)||null===t)return e._offset;var n=Je("utcoffset() argument must be a datetime instance or None");throw n.__cause__=null,n})},get tzname(){return j(this,function(e,t){if(W(t,Hr)||null===t)return null===e._name?e._name_from_offset(e._offset):e._name;var n=Je("tzname() argument must be a datetime instance or None");throw n.__cause__=null,n})},get dst(){return j(this,function(e,t){if(W(t,Hr)||null===t)return null;var n=Je("dst() argument must be a datetime instance or None");throw n.__cause__=null,n})},get fromutc(){return j(this,function(e,t){if(W(t,Hr)){if(t.tzinfo!==e){var n=We("fromutc: dt.tzinfo is not self");throw n.__cause__=null,n}return Ne(t,e._offset)}n=Je("fromutc() argument must be a datetime instance or None");throw n.__cause__=null,n})},_maxoffset:Sr(N({hours:23,minutes:59})),_minoffset:ze(T(Sr,null,N({hours:23,minutes:59}))),get _name_from_offset(){return function(e){if(Ce(e,T(Sr,null,0))){var t="-";e=ze(e)}else t="+";var n=T(ot,null,e,T(Sr,null,N({hours:1}))),r=n[0],o=n[1],a=Te(o,T(Sr,null,N({minutes:1})));return"UTC{}{}:{}".format(t,$n(r,2),$n(a,2))}}}),Kr=Wr._create(Sr(0)),Qr=Wr._create(Wr._minoffset),Vr=Wr._create(Wr._maxoffset);Object.defineProperty(Wr,"utc",{get:function(){return Kr}}),Object.defineProperty(Wr,"min",{get:function(){return Qr}}),Object.defineProperty(Wr,"max",{get:function(){return Vr}});var $r=Hr(1970,1,1,N({tzinfo:Wr.utc})),Jr="game_log",Zr=E("GameLog",[z],{__module__:Jr,get __init__(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=10;e.entries=[],e.max_size=t})},get add_entry(){return j(this,function(e,t){var n=Hr.now().strftime("%Y-%m-%d %H:%M:%S");return e.entries.append(se([n,t])),U(e.entries)>e.max_size&&e.entries.py_pop(0),t})},get get_recent_entries(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=10;return function(){var n=[];for(var[r,o]of e.entries.__getslice__(-t,null,1))n.append("{} - {}".format(r,o));return n}()})},get py_clear(){return j(this,function(e){e.entries.py_clear()})},get __str__(){return j(this,function(e){return"\n".join(function(){var t=[];for(var[n,r]of e.entries)t.append("{} - {}".format(n,r));return ne(t)}())})}}),eo="enemy",to=E("Enemy",[z],{__module__:eo,get __init__(){return j(this,function(e,t,n,r,o,a,i,_,u,s){e.py_name=t,e.ascii=n,e.level=r,e.max_hp=o,e.hp=a,e.attack=i,e.defense=_,e.xp_reward=u,e.gold_reward=s})},get is_alive(){return j(this,function(e){return e.hp>0})},get to_dict(){return j(this,function(e){return je({name:e.py_name,ascii:e.ascii,level:e.level,max_hp:e.max_hp,hp:e.hp,attack:e.attack,defense:e.defense,xp_reward:e.xp_reward,gold_reward:e.gold_reward})})}}),no={};M(no,"",o);var ro=function(e,t){return e+t},oo=function(e,t,n,r){var o=ro(n,r),a=e.__getslice__(null,$(3+o,U(e)),1),i=no.choice(a),_=V(1,$(t+3,t+no.choice([-1,0,0,1])+Math.floor(o/2))),u=i["base_hp"]+3*_+no.randint(0,3),s=i["base_attack"]+_+no.randint(0,2),l=i["base_defense"]+Math.floor(_/3),f=i["xp_reward"]+10*_+no.randint(0,10),c=i["gold_reward"]+3*_+no.randint(0,6);return to("{} (Lv {})".format(i["name"],_),i["ascii"],_,u,u,s,l,f,c)},ao=function(e,t){var n=e-t,r=no.randint(-1,2);return V(1,n+r)},io=je({Firebolt:je({mp:4,pow:6}),Heal:je({mp:5,pow:10}),"Ice Shard":je({mp:7,pow:9}),Shock:je({mp:6,pow:5}),Regen:je({mp:5,pow:3}),"Guard Break":je({mp:4,pow:2})}),_o="game_state",uo=E("GameState",[z],{__module__:_o,START_MENU:"START_MENU",EXPLORING:"EXPLORING",ASKING_QUESTION:"ASKING_QUESTION",MAP_VIEW:"MAP_VIEW",COMBAT:"COMBAT",SHOP:"SHOP",GAME_OVER:"GAME_OVER"}),so="action",lo=E("Action",[z],{__module__:so,get __init__(){return j(this,function(e,t,n,r,o,a,i){if("undefined"==typeof o||null!=o&&o.hasOwnProperty("__kwargtrans__"))o="general";if("undefined"==typeof a||null!=a&&a.hasOwnProperty("__kwargtrans__"))a=!0;if("undefined"==typeof i||null!=i&&i.hasOwnProperty("__kwargtrans__"))i=null;e.id=t,e.label=n,e.hotkeys=r,e.category=o,e.enabled=a,e.reason=i})},get to_dict(){return j(this,function(e){return je({id:e.id,label:e.label,hotkeys:e.hotkeys,category:e.category,enabled:e.enabled,reason:e.reason})})}}),fo=E("_Actions",[z],{__module__:so,get __init__(){return j(this,function(e,t){e.g=t,e._exec_map=je({}),e._key_to_id=je({})})},get available(){return j(this,function(e){var t=e.g,n=t.world,r=se([t.x,t.y]),o=r[0],a=r[1],i=[];if(t.state==uo.COMBAT){t.enemy;for(var _ of(i.extend([lo("combat_attack","Attack",["attack","a"],"combat"),lo("combat_potion","Use Potion",["potion","p"],"combat",N({enabled:t.player.potions>0,reason:t.player.potions>0?null:"No potions"})),lo("combat_flee","Flee",["flee","run","f"],"combat"),lo("look","Examine Enemy",["look","l"],"combat"),lo("stats","Stats",["stats","s"],"combat")]),t.player.known_spells))if(L(_,io)){var u=D(io[_]["mp"]);i.append(lo(N({id:"cast::{}".format(_.lower()),label:"Cast {} (MP {})".format(_,u),hotkeys:["cast {}".format(_).lower()],category:"combat",enabled:t.player.mp>=u,reason:t.player.mp>=u?null:"Not enough MP"})))}for(var _ of(e._exec_map=je({combat_attack:t.combat_attack,combat_potion:t.combat_potion,combat_flee:t.combat_flee,look:t.look,stats:t.stats}),t.player.known_spells))L(_,io)&&(e._exec_map["cast::{}".format(_.lower())]=function(e){if("undefined"==typeof e||null!=e&&e.hasOwnProperty("__kwargtrans__"))e=_;return t.combat_cast(e)})}else if(t.state==uo.GAME_OVER)i.extend([lo("game_over_load","Load Game",["load","l"],"game_over"),lo("game_over_restart","Restart Game",["restart","r"],"game_over")]),e._exec_map=je({game_over_load:t.load_game,game_over_restart:t.restart_game});else if(t.state==uo.SHOP){var s=t.shop_items,l=1;for(var f of s.py_keys())i.append(lo(N({id:"shop_buy::{}".format(f),label:"Buy {} (Gold {})".format(f,s[f]),hotkeys:["buy {}".format(f).lower(),"{}".format(l),f],category:"shop"}))),l++;for(var f of(i.append(lo("shop_exit","Exit Shop",["exit","e"],"shop")),i.append(lo("look","View Shop",["look","l"],"shop")),i.append(lo("stats","Stats",["stats","s"],"shop")),e._exec_map=je({shop_exit:t.shop_exit,look:t.look,stats:t.stats}),s.py_keys()))e._exec_map["shop_buy::{}".format(f.lower())]=function(e){if("undefined"==typeof e||null!=e&&e.hasOwnProperty("__kwargtrans__"))e=f;return t.shop(e)}}else if(t.state==uo.START_MENU)i.extend([lo("start_new_game","New Game",["new","n"],"start_menu"),lo("start_load_game","Load Game",["load","l"],"start_menu"),lo("start_quit","Quit",["quit","q"],"start_menu")]),e._exec_map=je({start_new_game:t.start_new_game,start_load_game:t.start_load_game,start_quit:t.start_quit});else if(t.state==uo.ASKING_QUESTION)i.extend([lo("answer_yes","Yes",["yes","y"],"question"),lo("answer_no","No",["no","n"],"question"),lo("look","Examine",["look","l"],"question"),lo("stats","Stats",["stats","s"],"question")]),e._exec_map=je({answer_yes:function(){return t.execute_question(!0)},answer_no:function(){return t.execute_question(!1)},look:t.look,stats:t.stats});else{var c=function(e,t){return e<0||t<0||e>=n.width||t>=n.height?se([!1,"Edge of the world"]):se([!0,null])},p=[se(["move_n","North","travel",se([0,-1]),["n","north","ArrowUp"]]),se(["move_s","South","travel",se([0,1]),["s","south","ArrowDown"]]),se(["move_w","West","travel",se([-1,0]),["w","west","ArrowLeft","a"]]),se(["move_e","East","travel",se([1,0]),["e","east","ArrowRight","d"]])];for(var[d,h,m,[g,y],v]of p){r=c(o+g,a+y);var w=r[0],b=r[1];i.append(lo(d,h,v,m,w,b))}i.extend([lo("look","Look",["look","l"],"info"),lo("map","Map",["map","m"],"info"),lo("stats","Stats",["stats","character","c"],"info"),lo("rest","Rest",["rest","r"],"camp"),lo("shop","Shop",["shop"],"town",F(C(t.current_tile(),"shop",!1)),C(t.current_tile(),"shop",!1)?null:"No merchant here"),lo("inventory","Inventory",["inv","inventory","i"],"info")]),e._exec_map=je({move_n:function(){return t.move(0,-1,!0)},move_s:function(){return t.move(0,1,!0)},move_w:function(){return t.move(-1,0,!0)},move_e:function(){return t.move(1,0,!0)},look:t.look,map:t.map,stats:t.stats,rest:t.rest,shop:t.shop_enter,inventory:function(){return"Inventory: Potions x{}; Gold {}".format(t.player.potions,t.player.gold)}})}for(var k of(i.extend([lo("save_game","Save Game",["save","!"],"system"),lo("help","Help",["help","h","?"],"system"),lo("quit_game","Quit Game",["quit","q"],"system"),lo("log","Show Log",["log","g"],"system")]),e._exec_map.py_update(je({save_game:t.save_game,help:t.help_text,quit_game:t.quit_game,log:t.get_log})),e._key_to_id=je({}),i))for(var x of k.hotkeys)e._key_to_id[x.lower()]=k.id;return function(){var e=[];for(var t of i)e.append(t.to_dict());return e}()})},get execute(){return j(this,function(e,t){if(!t)return null;var n=t.strip().lower();e._exec_map||e.available();var r=n;if(!L(r,e._exec_map))r=e._key_to_id.py_get(n,n);var o=e._exec_map.py_get(r);if(!o)return null;try{return o()}catch(No){if(W(No,Fe)){var a="";return"Action '{}' failed: \n{}".format(r,a)}throw No}})}}),co=function(e,t,n){return"{}: {}/{}".format(e,t,n)},po=function(e,t,n){return V(0,e-(n>0?t:0))},ho=function(e,t,n){return V(t,$(n,e))},mo=function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var n=e?e.splitlines():[],r=V(function(){var e=[];for(var t of n)e.append(U(t));return e}()+(t?[U(t)]:[0,0])),o="+"+"-"*(r+2)+"+",a=[o];for(var i of(t&&(a.append("| "+t.ljust(r)+" |"),a.append("| "+"-"*r+" |")),n))a.append("| "+i.ljust(r)+" |");return a.append(o),"\n".join(a)},go=function(e,t){try{var n=e.ascii;if(!n)n=e.py_name.lower().py_replace(" ","_")+".txt";var r=t.load(n);return r||mo("",N({title:e.py_name}))}catch(No){return mo("",N({title:e.py_name}))}},yo="weapon",vo=E("Weapon",[z],{__module__:yo,get __init__(){return j(this,function(e,t,n){e.py_name=t,e.attack_bonus=n})},get __str__(){return j(this,function(e){return"Weapon(name={}, attack_bonus={})".format(e.py_name,e.attack_bonus)})}}),wo="armor",bo=E("Armor",[z],{__module__:wo,get __init__(){return j(this,function(e,t,n){e.py_name=t,e.defense_bonus=n})},get __str__(){return j(this,function(e){return"Armor(name={}, defense_bonus={})".format(e.py_name,e.defense_bonus)})}}),ko={};M(ko,"",o);var xo="__main__",Oo=E("Game",[z],{__module__:xo,get __init__(){return j(this,function(e,t,n,r,o){e.world=t,e.player=n,e.x=r,e.y=o,e.explored=le(),e._mark_explored(e.x,e.y),e.actions=fo(e),e.state=uo.EXPLORING,e.enemy=null,e._combat_log=[],e._player_regen_turns=0,e._player_regen_amount=0,e._enemy_stunned_turns=0,e._enemy_def_down=0,e._enemy_def_turns=0,e.pending_move=null,e.question="",e.pending_weapon=null,e.ended=!1,e.log=Zr(),e.shop_items=null,e.save_file=null,e.save_fn=function(){return"Save game not implemented."},e.load_fn=function(){return!1},e.ascii_tiles=!0,e.data_loader=function(){return null},e.ascii_loader=function(){return null},e.enemy_archetypes=[]})},get load_configurations(){return j(this,function(e,t){e.enemy_archetypes=e.data_loader.load(t)})},get current_tile(){return j(this,function(e){return e.world.get_tile(e.x,e.y)})},get new_random(){return function(e,t,n){if("undefined"==typeof n||null!=n&&n.hasOwnProperty("__kwargtrans__"))n=null;var r=an.generate_random(e,t,n),o=Math.floor(r.width/2),a=Math.floor(r.height/2);return Oo(N({world:r,player:ln(N({py_name:"Hero",level:1,xp:0,gold:50,max_hp:20,hp:20,max_mp:10,mp:10,attack:5,defense:2,potions:1,known_spells:[],weapon:vo(N({py_name:"Wooden Sword",attack_bonus:2})),armor:bo(N({py_name:"Cloth Armor",defense_bonus:1}))})),x:o,y:a}))}},get help_text(){return j(this,function(e){var t=e.available_actions(),n=["Available actions:"];for(var r of t){var o=r.py_get("label",r.py_get("id","")),a=r.py_get("hotkeys")?" [{}]".format(", ".join(r.py_get("hotkeys",[]))):"",i=r.py_get("enabled",!0)?"":" (disabled)",_=!r.py_get("enabled",!0)&&r.py_get("reason")?"  {}".format(r["reason"]):"";n.append("  - {}{}{}{}".format(o,a,i,_))}return"\n".join(n)})},get get_log(){return j(this,function(e){return"{}".format(e.log)})},get save_game(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var n=t||e.save_file,r=e.save_fn(e.to_dict(),n);return r})},get restart_game(){return j(this,function(e){var t=Oo.new_random(N({size:e.world.get_size()}));e.copy_from(t);var n="Game restarted.";return n+="\n"+e.look(),n})},get load_game(){return j(this,function(e,t){if("undefined"==typeof t||null!=t&&t.hasOwnProperty("__kwargtrans__"))t=null;var n=e.load_fn(t||e.save_file);if(n){e.copy_from(Oo.from_dict(n));var r="Game loaded."}else r="No save found or save file invalid.";return r})},get quit_game(){return j(this,function(e){e.ended=!0;var t="Game ended by player.";return t})},get execute_question(){return j(this,function(e,t){if(e.state!=uo.ASKING_QUESTION)return"No question pending.";if(e.pending_move)return e.execute_pending_move(t);if(e.pending_weapon){if(t){e.player.weapon=e.pending_weapon;var n="You equip the {}.".format(e.pending_weapon.py_name)}else n="You leave the weapon behind.";return delete e.pending_weapon,e.change_state(uo.EXPLORING),n}return"No question pending."})},get move(){return j(this,function(e,t,n,r){e.log.add_entry("Attempting to move from ({},{}) by delta ({},{})".format(e.x,e.y,t,n));var o=un(e.x+t,0,e.world.width-1),a=un(e.y+n,0,e.world.height-1);if(o==e.x&&a==e.y)return"You can't go that way.";var i=e.world.get_tile(o,a);try{var _=.6;if(!i.safe&&i.danger>=_&&r)return e.change_state(uo.ASKING_QUESTION),e.pending_move=se([o,a]),e.question="Warning: '{}' seems very dangerous (danger {}). Proceed? [y/N]".format(i.py_name,i.danger),e.question}catch(No){if(!W(No,Fe))throw No}e.change_state(uo.EXPLORING);var u=se([o,a]);e.x=u[0],e.y=u[1],e._mark_explored(e.x,e.y);var s=e.current_tile(),l=e.ascii_tiles?go(s,e.ascii_loader):"",f="{}\nYou arrive at {}. {}".format(l,s.py_name,s.description);if(s.shop&&(f+="\nYou see a merchant here (type shop to enter)."),!s.safe&&ko.random()<s.danger){var c=oo(e.enemy_archetypes,e.player.level,e.x,e.y),p=e.enter_combat(c);return f+"\n\n"+p}try{var d=e._maybe_field_find(s);d&&(f+="\n\n"+d)}catch(No){if(!W(No,Fe))throw No}return f})},get execute_pending_move(){return j(this,function(e,t){if(e.state!=uo.ASKING_QUESTION||!q(e,"pending_move"))return"No move pending confirmation.";if(t){var n=e.pending_move,r=n[0],o=n[1];return delete e.pending_move,e.change_state(uo.EXPLORING),e.move(r-e.x,o-e.y,!1)}return delete e.pending_move,e.change_state(uo.EXPLORING),"You decide not to proceed there."})},get look(){return j(this,function(e){if(e.state==uo.COMBAT)return e._combat_status();if(e.state==uo.SHOP)return e.shop("");if(e.state==uo.ASKING_QUESTION)return e.question;if(e.state==uo.GAME_OVER)return"Game Over. You can load a saved game or restart.";var t=e.current_tile(),n=e.ascii_tiles?go(t,e.ascii_loader):"";return"{}\n{}: {} \n{}".format(n,t.py_name,t.description,t.shop?"You see a merchant here (type shop to enter).":"")})},get available_actions(){return j(this,function(e){return e.actions.available()})},get execute_action(){return j(this,function(e,t){var n=e.actions.execute(t);return e.log.add_entry(n),n})},get _mark_explored(){return j(this,function(e,t,n){try{e.explored.add(se([D(t),D(n)]))}catch(No){if(!W(No,Fe))throw No}})},get map(){return j(this,function(e){for(var t=[],n=0;n<e.world.height;n++){for(var r=[],o=0;o<e.world.width;o++){if(o==e.x&&n==e.y)var a="@";else if(L(se([o,n]),e.explored))a=".";else a="?";r.append(a)}t.append("".join(r))}var i="Map ({}x{})  @ you, . explored, ? unknown".format(e.world.width,e.world.height);return i+"\n"+"\n".join(t)})},get stats(){return j(this,function(e){var t=e.player;return"{} Lv {}\nXP: {}/{} | Gold: {}\nHP: {}/{} | MP: {}/{} | ATK: {} | DEF: {} | Potions: {} | Spells: {}\nWeapon: {}\nArmor: {}\nSpells Known: {}\nLocation: ({},{}) - {}\nState: {}".format(t.py_name,t.level,t.xp,sn(t.level),t.gold,t.hp,t.max_hp,t.mp,t.max_mp,t.attack,t.defense,t.potions,U(function(){var e=[];for(var n of t.known_spells)L(n,io)&&e.append(n);return e}()),t.weapon?t.weapon:"None",t.armor?t.armor:"None",t.known_spells?", ".join(t.known_spells):"None",e.x,e.y,e.current_tile().py_name,e.state)})},get shop_exit(){return j(this,function(e){return e.change_state(uo.EXPLORING),"You leave the shop.\n"+e.look()})},get shop_enter(){return j(this,function(e){var t=e.current_tile();return C(t,"shop",!1)?"You enter the shop!\n"+e.shop(""):"There is no shop here."})},get shop(){return j(this,function(e,t){var n=e.current_tile();if(!C(n,"shop",!1))return"There is no shop here.";var r=je({Firebolt:25,Heal:30,"Ice Shard":45,Shock:40,Regen:35,"Guard Break":30}),o=function(){var t=[];for(var n of r.py_keys())L(n,io)&&!L(n,e.player.known_spells)&&t.append(n);return t}();if(e.shop_items=function(){var e=[];for(var t of o)e.append([t,r[t]]);return je(e)}(),e.change_state(uo.SHOP),!o)return"The merchant smiles: 'You've learned all I can teach you for now.'";if(null===t){var a=["\nMerchant's Caravan  Spells for sale:"];for(var[i,_]of _e(o,1))a.append("  {}. {}  {}g (MP {})".format(i,_,r[_],io[_]["mp"]));return a.append("Player gold: {}".format(e.player.gold)),a.append("Type a number or spell name to buy, or press Enter to leave."),"\n".join(a)}var u=null;if(t.isdigit()){var s=D(t)-1;if(0<=s&&s<U(o))u=o[s]}else for(var l of o)if(l.lower()==t.lower()){u=l;break}if(!u)return"The merchant shrugs. 'I don't have that.'";var f=r[u];return e.player.gold<f?"You don't have enough gold.":(e.player.gold-=f,e.player.known_spells=ue(e.player.known_spells)+[u],"You learn the spell {}!".format(u))})},get rest(){return j(this,function(e){var t=e.current_tile();if(t.safe){var n=e.player.heal(8+2*e.player.level);return ko.random()<.15?(e.player.potions++,"You rest at the village and heal {} HP. The healer gifts you a potion.".format(n)):"You rest at the village and heal {} HP.".format(n)}n=e.player.heal(4+e.player.level);var r="You rest cautiously and heal {} HP.".format(n);if(ko.random()<$(.2+t.danger/2,.75)){var o=oo(e.player.level,e.x,e.y);r+="\nYou are ambushed in your sleep!";var a=e.enter_combat(o);return r+"\n\n"+a}return r})},get debug_pos(){return j(this,function(e){return"Pos: ({},{})".format(e.x,e.y)})},get to_dict(){return j(this,function(e){var t=e.player;return je({player:je({name:t.py_name,level:t.level,xp:t.xp,gold:t.gold,max_hp:t.max_hp,hp:t.hp,max_mp:t.max_mp,mp:t.mp,attack:t.attack,defense:t.defense,potions:t.potions,known_spells:ue(t.known_spells),weapon:t.weapon?je({name:t.weapon.py_name,attack_bonus:t.weapon.attack_bonus}):null,armor:t.armor?je({name:t.armor.py_name,defense_bonus:t.armor.defense_bonus}):null}),world:e.world.to_dict(),pos:je({x:e.x,y:e.y}),explored:function(){var t=[];for(var[n,r]of tt(e.explored))t.append([n,r]);return t}(),state:fe(e.state),combat:e.state==uo.COMBAT?je({enemy:e.enemy?e.enemy.to_4dict():null,regen_turns:e._player_regen_turns,regen_amount:e._player_regen_amount,enemy_stunned:e._enemy_stunned_turns,enemy_def_down:e._enemy_def_down,enemy_def_turns:e._enemy_def_turns}):null})})},get from_dict(){return function(e){var t=an.from_dict(e["world"]),n=e["player"],r=n.py_get("weapon"),o=n.py_get("armor"),a=W(r,je)?vo(N({py_name:r["name"],attack_bonus:D(r["attack_bonus"])})):null,i=W(o,je)?bo(N({py_name:o["name"],defense_bonus:D(o["defense_bonus"])})):null,_=ln(N({py_name:n["name"],level:D(n["level"]),xp:D(n["xp"]),gold:D(n["gold"]),max_hp:D(n["max_hp"]),hp:D(n["hp"]),max_mp:D(n.py_get("max_mp",10)),mp:D(n.py_get("mp",n.py_get("max_mp",10))),attack:D(n["attack"]),defense:D(n["defense"]),potions:D(n.py_get("potions",0)),known_spells:n.py_get("known_spells",se([])),weapon:a,armor:i})),u=e.py_get("pos",je({x:0,y:0})),s=D(u.py_get("x",0)),l=D(u.py_get("y",0)),f=Oo(N({world:t,player:_,x:s,y:l})),c=e.py_get("explored")||[];try{for(var p of c)if(W(p,se([ue,se]))&&2==U(p)){var d=se([D(p[0]),D(p[1])]),h=d[0],m=d[1];0<=h&&h<t.width&&0<=m&&m<t.height&&f._mark_explored(h,m)}}catch(No){if(!W(No,Fe))throw No}f._mark_explored(f.x,f.y),f.state=fe(e.py_get("state")||uo.EXPLORING);var g=e.py_get("combat")||null;try{if(W(g,je)&&g.py_get("enemy")){var y=g["enemy"];f.enemy=to(N({py_name:y["name"],ascii:y["ascii"],level:D(y["level"]),max_hp:D(y["max_hp"]),hp:D(y["hp"]),attack:D(y["attack"]),defense:D(y["defense"]),xp_reward:D(y["xp_reward"]),gold_reward:D(y["gold_reward"])})),f._player_regen_turns=D(g.py_get("regen_turns",0)),f._player_regen_amount=D(g.py_get("regen_amount",0)),f._enemy_stunned_turns=D(g.py_get("enemy_stunned",0)),f._enemy_def_down=D(g.py_get("enemy_def_down",0)),f._enemy_def_turns=D(g.py_get("enemy_def_turns",0))}}catch(No){if(!W(No,Fe))throw No}return f}},get copy_from(){return j(this,function(e,t){e.world=t.world,e.player=t.player,e.x=t.x,e.y=t.y;try{e.explored=le(t.explored)}catch(No){if(!W(No,Fe))throw No;e.explored=new le([se([e.x,e.y])])}e.state=t.state,e.enemy=t.enemy,e._player_regen_turns=t._player_regen_turns,e._player_regen_amount=t._player_regen_amount,e._enemy_stunned_turns=t._enemy_stunned_turns,e._enemy_def_down=t._enemy_def_down,e._enemy_def_turns=t._enemy_def_turns,e.available_actions()})},get change_state(){return j(this,function(e,t){e.state=t,e.actions.available()})},get _weapon_pool(){return j(this,function(e){return[vo("Rusty Dagger",1),vo("Wooden Sword",2),vo("Iron Sword",3),vo("Steel Axe",4),vo("Knight's Blade",5),vo("Runed Spear",6)]})},get _random_weapon_for_level(){return j(this,function(e){var t=e._weapon_pool(),n=$(U(t)-1,V(0,Math.floor((e.player.level-1)/2)+ko.randint(-1,1))),r=t.__getslice__(V(0,n-1),$(U(t),n+2),1)||t;return ko.choice(r)})},get _offer_weapon_pickup(){return j(this,function(e,t,n){var r=e.player.weapon,o=r?r.attack_bonus:0,a=t.attack_bonus-o;return e.pending_weapon=t,e.change_state(uo.ASKING_QUESTION),e.question="You find {} (ATK +{}) from {}.".format(t.py_name,t.attack_bonus,n),e.question+=r?"\nCurrent: {} (ATK +{}).".format(r.py_name,r.attack_bonus):"\nYou have no weapon equipped.",e.question+="\nIt seems {}. Take it? [y/N]".format(a>0?"better":0==a?"the same":"worse"),e.question})},get _maybe_field_find(){return j(this,function(e,t){var n=t.safe?.03:.1;if(ko.random()<n){var r=e._random_weapon_for_level();return e._offer_weapon_pickup(r,"the area")}return""})},get _maybe_offer_weapon(){return j(this,function(e,t){var n=.25;if(ko.random()<n){var r=e._random_weapon_for_level();e._offer_weapon_pickup(r,t)}})},get enter_combat(){return j(this,function(e,t){e.change_state(uo.COMBAT),e.enemy=t,e._combat_log=[],e._enemy_stunned_turns=0,e._enemy_def_down=0,e._enemy_def_turns=0;var n="A {} appears! Prepare for battle.".format(t.py_name);return n+"\n"+e._combat_status()})},get _combat_status(){return j(this,function(e){if(!e.enemy)return"";var t=e.enemy,n=[co("You",e.player.hp,e.player.max_hp)+" | MP {}/{}".format(e.player.mp,e.player.max_mp),co(t.py_name,t.hp,t.max_hp),"\n{}\n".format(t.ascii),"[Enemy Stats] ATK: {} | DEF: {}".format(t.attack,t.defense)];return"\n".join(n)})},get _end_combat(){return j(this,function(e,t){var n=[];if(t){var r=e.enemy;if(r){e.player.gold+=V(0,D(r.gold_reward)),n.append("You defeated {}! You loot {} gold.".format(r.py_name,r.gold_reward));var o=e.player.add_xp(V(0,D(r.xp_reward)));n.extend(o);try{e._maybe_offer_weapon("the fallen {}".format(r.py_name))}catch(No){if(!W(No,Fe))throw No}}}else n.append("You were defeated...");return e.enemy=null,e._player_regen_turns=0,e._player_regen_amount=0,e._enemy_stunned_turns=0,e._enemy_def_down=0,e._enemy_def_turns=0,e.player.is_alive()?(e.change_state(uo.EXPLORING),"\n".join(n)):(e.change_state(uo.GAME_OVER),"\n".join(n))})},get _player_regen_tick(){return j(this,function(e){if(e._player_regen_turns>0&&e._player_regen_amount>0){var t=e.player.heal(e._player_regen_amount);return e._player_regen_turns--,"Regen restores {} HP.".format(t)}return null})},get _enemy_turn(){return j(this,function(e){var t=[];if(!e.enemy)return t;var n=e.enemy;if(e._enemy_stunned_turns>0)t.append("{} is stunned and cannot act!".format(n.py_name)),e._enemy_stunned_turns--;else{var r=ao(D(n.attack),D(e.player.total_defense));r=V(1,r);e.player.hp=ho(e.player.hp-r,0,e.player.max_hp),t.append("{} strikes you for {} damage.".format(n.py_name,r))}e._enemy_def_turns>0&&(e._enemy_def_turns--,0==e._enemy_def_turns&&e._enemy_def_down>0&&(t.append("The enemy's defenses recover."),e._enemy_def_down=0));var o=e._player_regen_tick();return o&&t.append(o),e.player.is_alive()||t.append(e._end_combat(!1)),t})},get combat_attack(){return j(this,function(e){if(e.state!=uo.COMBAT||!e.enemy)return"There's nothing to attack.";var t=e.enemy,n=po(D(t.defense),e._enemy_def_down,e._enemy_def_turns),r=ao(D(e.player.total_attack),n);t.hp=ho(t.hp-r,0,t.max_hp);var o=["You strike the {} for {} damage.".format(t.py_name,r)];return t.hp<=0?(o.append(e._end_combat(!0)),"\n".join(function(){var e=[];for(var t of o)t&&e.append(t);return e}())):(o.extend(e._enemy_turn()),o.append(e._combat_status()),"\n".join(function(){var e=[];for(var t of o)t&&e.append(t);return e}()))})},get combat_cast(){return j(this,function(e,t){if(e.state!=uo.COMBAT||!e.enemy)return"You can't cast that now.";if(!L(t,io))return"You don't know that spell.";var n=D(io[t]["mp"]);if(e.player.mp<n)return"Not enough MP!";e.player.mp-=n;var r=e.enemy,o=[],a=D(io[t]["pow"]);if("Heal"==t){var i=e.player.heal(a+e.player.level);o.append("You cast Heal and restore {} HP.".format(i))}else if("Regen"==t)e._player_regen_turns=3,e._player_regen_amount=a,o.append("You cast Regen. You'll recover {} HP for 3 turns.".format(a));else if("Guard Break"==t)e._enemy_def_down=a+Math.floor(e.player.level/4),e._enemy_def_turns=2,o.append("You cast Guard Break! The enemy's defenses falter.");else{var _=V(1,a+Math.floor(e.player.level/2)+ko.randint(0,2)-Math.floor(D(r.defense)/4));if(r.hp=ho(r.hp-_,0,r.max_hp),o.append("You cast {}! It hits {} for {} damage.".format(t,r.py_name,_)),r.hp<=0)return o.append(e._end_combat(!0)),"\n".join(function(){var e=[];for(var t of o)t&&e.append(t);return e}())}return o.extend(e._enemy_turn()),o.append(e._combat_status()),"\n".join(function(){var e=[];for(var t of o)t&&e.append(t);return e}())})},get combat_potion(){return j(this,function(e){if(e.state!=uo.COMBAT)return"You don't need to use a potion now.";if(e.player.potions<=0)return"You have no potions.";e.player.potions--;var t=e.player.heal(12+e.player.level),n=["You quaff a potion and recover {} HP.".format(t)];return n.extend(e._enemy_turn()),n.append(e._combat_status()),"\n".join(function(){var e=[];for(var t of n)t&&e.append(t);return e}())})},get combat_flee(){return j(this,function(e){if(e.state!=uo.COMBAT||!e.enemy)return"There is nothing to flee from.";var t=.5;try{if(e.enemy.level>e.player.level)t=.35}catch(No){if(!W(No,Fe))throw No}if(ko.random()<t)return e.change_state(uo.EXPLORING),e.enemy=null,e._player_regen_turns=0,e._player_regen_amount=0,e._enemy_stunned_turns=0,e._enemy_def_down=0,e._enemy_def_turns=0,"You successfully flee back to safety.";var n=["You fail to flee!"];return n.extend(e._enemy_turn()),n.append(e._combat_status()),"\n".join(function(){var e=[];for(var t of n)t&&e.append(t);return e}())})}});function Po(e,t){const n=t["village"],r=t["tiles"],o=[];for(let i=0;i<e;i++){const t=[];for(let n=0;n<e;n++){const e=Object.keys(r),n=e[Math.floor(Math.random()*e.length)],o=r[n],a=new on(o.name,o.description,o.danger,o.safe,o.ascii);t.push(a)}o.push(t)}const a=Math.floor(e/2);return o[a][a]=new on(n.name,n.description,n.danger,n.safe,n.ascii,n.shop),o}function Mo(e){const t=e.flat().map(e=>e.name||e.py_name).join("-");let n=0;for(let r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r),n|=0;return Math.abs(n)}function jo(e){const t=e.player,n=new ln(t.name,t.level,t.max_hp,t.hp,t.max_mp,t.mp,t.attack,t.defence,t.potions,t.known_spells||[],t.xp,t.weapon,t.armor),r=e.world,o=[];for(let _=0;_<r.height;_++){const e=[];for(let t=0;t<r.width;t++){const n=r.grid[_][t],o=new on(n.name,n.description,n.danger,n.safe,n.ascii,n.shop);e.push(o)}o.push(e)}const a=new an(r.width,r.height,o,r.seed),i=new Oo(a,n,e.pos.x,e.pos.y);i.ended=!1,i.state=e.state;for(const _ of e.explored)i._mark_explored(_.x,_.y);return i}function Ao(e){e.data_loader={load:e=>{const t=new XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),200===t.status)return JSON.parse(t.responseText);throw new Error("Failed to load JSON file: "+e)}},e.ascii_loader={load:e=>{const t=new XMLHttpRequest;if(t.open("GET","/data/rooms/"+e,!1),t.send(null),200===t.status)return t.responseText;throw new Error("Failed to load Text file: "+e)}},e.load_configurations("/data/enemies.json")}async function So(e){const t=await fetch("/data/tileset.json").then(e=>e.json()),n=new ln("Hero",1,25,25,5,5,2,1,3,[],0,null,null),r=Po(e,t),o=new an(e,e,r,Mo(r)),a=new Oo(o,n,Math.floor(e/2),Math.floor(e/2));return Ao(a),a}var zo={name:"App",data(){return{screen:"menu",banner:"=".repeat(50)+"\nOakheart Tales: A Tiny Text Adventure\nExplore, fight, and grow stronger. Type 'help' to begin.\n"+"=".repeat(50),game:null,gameText:"",userInput:"",mapSize:null}},components:{ActionButtons:b},computed:{actions(){return this.game&&this.game.actions&&"function"===typeof this.game.actions.available?this.game.actions.available():[]}},methods:{startNewGame(){this.screen="mapSize"},selectMapSize(e){this.mapSize=e,this.initGame()},async initGame(){this.game=await So(this.mapSize),this.game.save_fn=this.saveGame,this.game.load_fn=this.loadGame,this.screen="game",this.renderGame()},saveGame(){this.game&&(localStorage.setItem("savegame",JSON.stringify(this.game.to_dict())),alert("Game saved!"))},loadGame(){const e=localStorage.getItem("savegame");if(e){const t=JSON.parse(e);this.game=jo(t),Ao(this.game),this.game.save_fn=this.saveGame,this.game.load_fn=this.loadGame,this.screen="game",this.renderGame()}else alert("No saved game found.")},quitGame(){this.screen="menu",this.game=null,this.gameText="",this.userInput=""},restartGame(){this.screen="menu",this.game=null,this.gameText="",this.userInput=""},renderGame(){this.game&&(this.gameText=this.game.look())},handleAction(e){if("Restart Game"===e.label)this.restartGame();else if("Save Game"===e.label)this.saveGame();else if("Load Game"===e.label)this.loadGame();else{const t=this.game.execute_action(e.id);this.actions=this.game.actions.available(),this.game.ended?this.screen="gameOver":this.gameText=t||this.game.look()+"\n\nUnknown command: "+e.label}},handleInput(){if(!this.game||!this.userInput)return;this.actions=this.game.actions.available();const e=this.userInput.trim(),t=this.game.execute_action(e);this.actions=this.game.actions.available(),this.game.ended?this.screen="gameOver":this.gameText=t||this.game.look()+"\n\nUnknown command: "+e,this.userInput=""}}};const Eo=(0,v.A)(zo,[["render",d]]);var To=Eo;(0,i.Ef)(To).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var i=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],a=e[l][2];for(var _=!0,u=0;u<r.length;u++)(!1&a||i>=a)&&Object.keys(n.O).every(function(e){return n.O[e](r[u])})?r.splice(u--,1):(_=!1,a<i&&(i=a));if(_){e.splice(l--,1);var s=o();void 0!==s&&(t=s)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,i=r[0],_=r[1],u=r[2],s=0;if(i.some(function(t){return 0!==e[t]})){for(o in _)n.o(_,o)&&(n.m[o]=_[o]);if(u)var l=u(n)}for(t&&t(r);s<i.length;s++)a=i[s],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(l)},r=self["webpackChunkvue_js"]=self["webpackChunkvue_js"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],function(){return n(583)});r=n.O(r)})();
//# sourceMappingURL=app.6875ec9c.js.map